!function(){$(function(){$(".popup").each(function(){new Popup($(this))})})}();var Popup=function(n){var o=this,p=$(".popup__open"),i=n,e=i.find(".popup__close, .popup__cancel"),s=i.find(".popup__wrap"),t=i.find(".popup__content"),c=$("html, body"),u=$(".site__content"),d=$(window),a=setTimeout(function(){},1),f=function(){u.css({"z-index":4})},l=function(){u.css({"z-index":2})},_=function(){i.css({overflowY:"hidden"}),i.removeClass("popup_opened"),i.addClass("popup_hide"),a=setTimeout(function(){i.css({overflowY:"auto"}),i.removeClass("popup_hide")},300),d.width()<1024&&(c.css({overflowY:"auto",paddingRight:0}),l()),t.css({display:"none"}),i.find(".popup__addresses").length&&(i.find(".popup__addresses").children().css({display:"none"}),i.find(".popup__addresses").children().html(""),p.removeClass("ajax-block__btn_loaded"))},r=function(){i[0].obj=o,h()},h=function(){d.on({resize:function(){d.width()<1024&&_()}}),p.on({click:function(){return w($(this).attr("data-popup")),!1}}),s.on({click:function(n){n.stopPropagation()}}),i.on({click:function(){return _(),!1}}),e.on({click:function(){return _(),!1}})},w=function(n){v(n),i.addClass("popup_opened"),d.width()<1024&&(c.css({overflowY:"hidden"}),f())},v=function(n){var o=t.filter(".popup__"+n);o.css({display:"block"})};r()};
!function(){$(function(){$("select").each(function(){new e({obj:$(this),optionType:1,showType:2})})});var e=function(e){var t,n,i=this,o=e.obj,s=e.optionType||0,c=e.showType||0,a=e.visible||5,l=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),d=$('<span class="websters-select__item"></span>'),p=$('<div class="websters-select"></div>'),r=$(window),f=$("body"),u=!1,h=function(){var e="";o.css({opacity:0}),o.wrap(p),p=o.parent(),p.append('<div class="websters-select__arrow"></div>'),o.before(d),o.find("option").each(function(){var t=$(this);"selected"==t.attr("selected")&&(e=t.text())}),""==e&&(e=o.find("option").eq(0).text()),d.text(e)},v=function(){u=!1,c?1==c?t.stop(!0,!1).slideUp(300,function(){t.remove()}):2==c&&t.stop(!0,!1).fadeOut(300,function(){t.remove()}):t.css({display:"none"}),p.removeClass("websters-select_opened")},b=function(){o[0].obj=i,h(),g(),w()},w=function(){o.on("change",function(){d.text($(this).find("option:selected").text())}),1!=s||l||(p.on({click:function(e){e.stopPropagation(),u?v():m()}}),r.on({click:function(){u&&v()}})),$(".nice-scroll").on({scroll:function(){u&&v()}})},g=function(){!s||l?y():1==s&&_()},_=function(){p.addClass("websters-select_custom")},y=function(){p.addClass("websters-select_mobile")},m=function(){var e=$("select"),i=$("<ul></ul>"),s=(r.scrollTop(),p.offset()),l=0,d=o.find("option:selected").index(),h=Math.round(1e3*Math.random());e.each(function(){this!==o[0]&&this.obj.checkOpened()&&this.obj.close()}),u&&t.remove(),u=!0,t=$('<div class="websters-select__popup" id="websters-select__popup'+h+'"></div>'),o.find("option").each(function(e){var t=$(this);e==d?i.append('<li class="active">'+t.text()+"</li>"):i.append("<li>"+t.text()+"</li>")}),t.append(i),f.append(t),p.addClass("websters-select_opened"),t.css({width:p.outerWidth(),left:s.left,top:s.top+p.outerHeight()}),l=t.outerHeight(),l>t.find("li").eq(0).outerHeight()*a&&(t.height(t.find("li").eq(0).outerHeight()*a),n=t.niceScroll({horizrailenabled:!1})),1==c?(t.css({display:"none"}),t.slideDown(300)):2==c&&(t.css({opacity:.1}),t.animate({opacity:1},300)),t.find("li").on({click:function(e){var t=$(this).index();e.stopPropagation(),o.val(o.find("option").eq(t).attr("value")),o.trigger("change"),v()}})};i.checkOpened=function(){return u},i.close=function(){v()},b()}}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImpxdWVyeS5wb3B1cC5qcyIsImpxdWVyeS53ZWJzdGVycy1zZWxlY3QuanMiXSwibmFtZXMiOlsiJCIsImVhY2giLCJQb3B1cCIsInRoaXMiLCJvYmoiLCJfc2VsZiIsIl9idG5TaG93IiwiX29iaiIsIl9idG5DbG9zZSIsImZpbmQiLCJfd3JhcCIsIl9jb250ZW50cyIsIl9kb20iLCJfY29udGVudCIsIl93aW5kb3ciLCJ3aW5kb3ciLCJfdGltZXIiLCJzZXRUaW1lb3V0IiwiX2NoYW5nZUNvbnRlbnRaaW5kZXgiLCJjc3MiLCJ6LWluZGV4IiwiX3Jlc2V0Q29udGVudFppbmRleCIsIl9oaWRlIiwib3ZlcmZsb3dZIiwicmVtb3ZlQ2xhc3MiLCJhZGRDbGFzcyIsIndpZHRoIiwicGFkZGluZ1JpZ2h0IiwiZGlzcGxheSIsImxlbmd0aCIsImNoaWxkcmVuIiwiaHRtbCIsIl9pbml0IiwiX29uRXZlbnRzIiwib24iLCJyZXNpemUiLCJjbGljayIsIl9zaG93IiwiYXR0ciIsImUiLCJzdG9wUHJvcGFnYXRpb24iLCJjbGFzc05hbWUiLCJfc2V0UG9wdXBDb250ZW50IiwiY3VyQ29udGVudCIsImZpbHRlciIsIldlYnN0ZXJzU2VsZWN0Iiwib3B0aW9uVHlwZSIsInNob3dUeXBlIiwicGFyYW1zIiwiX3BvcHVwIiwiX3Njcm9sbCIsIl9vcHRpb25UeXBlIiwiX3Nob3dUeXBlIiwiX3Zpc2libGUiLCJ2aXNpYmxlIiwiX2RldmljZSIsInRlc3QiLCJuYXZpZ2F0b3IiLCJ1c2VyQWdlbnQiLCJfdGV4dCIsIl9ib2R5IiwiX29wZW5lZCIsIl9hZGRXcmFwIiwiY3VyVGV4dCIsIm9wYWNpdHkiLCJ3cmFwIiwicGFyZW50IiwiYXBwZW5kIiwiYmVmb3JlIiwiY3VySXRlbSIsInRleHQiLCJlcSIsIl9oaWRlUG9wdXAiLCJzdG9wIiwic2xpZGVVcCIsInJlbW92ZSIsImZhZGVPdXQiLCJfY29uc3RydWN0b3IiLCJfc2VsZWN0Vmlld1R5cGUiLCJfc2hvd1BvcHVwIiwic2Nyb2xsIiwiX3NldE1vYmlsZVZpZXciLCJfc2V0Q3VzdG9tMSIsInNlbGVjdHMiLCJsaXN0Iiwib2Zmc2V0Iiwic2Nyb2xsVG9wIiwibWF4SGVpZ2h0IiwiY3VySW5kZXgiLCJpbmRleCIsImlkIiwiTWF0aCIsInJvdW5kIiwicmFuZG9tIiwiY2hlY2tPcGVuZWQiLCJjbG9zZSIsImkiLCJvdXRlcldpZHRoIiwibGVmdCIsInRvcCIsIm91dGVySGVpZ2h0IiwiaGVpZ2h0IiwibmljZVNjcm9sbCIsImhvcml6cmFpbGVuYWJsZWQiLCJzbGlkZURvd24iLCJhbmltYXRlIiwidmFsIiwidHJpZ2dlciJdLCJtYXBwaW5ncyI6IkNBQUEsV0FFSUEsRUFBRyxXQUVDQSxFQUFHLFVBQVdDLEtBQU0sV0FFaEIsR0FBSUMsT0FBT0YsRUFBRUcsYUFVekIsSUFBSUQsT0FBUSxTQUFVRSxHQUdsQixHQUFJQyxHQUFRRixLQUVSRyxFQUFZTixFQUFHLGdCQUNmTyxFQUFPSCxFQUNQSSxFQUFZRCxFQUFLRSxLQUFNLGlDQUN2QkMsRUFBUUgsRUFBS0UsS0FBTSxnQkFDbkJFLEVBQVlKLEVBQUtFLEtBQU0sbUJBQ3ZCRyxFQUFPWixFQUFHLGNBQ1ZhLEVBQVdiLEVBQUcsa0JBQ2RjLEVBQVVkLEVBQUdlLFFBQ2JDLEVBQVNDLFdBQVksYUFBYyxHQVVuQ0MsRUFBdUIsV0FDbkJMLEVBQVNNLEtBQ0xDLFVBQVcsS0FHbkJDLEVBQXNCLFdBQ2xCUixFQUFTTSxLQUNMQyxVQUFXLEtBaUJuQkUsRUFBUSxXQUNKZixFQUFLWSxLQUNESSxVQUFXLFdBR2ZoQixFQUFLaUIsWUFBYSxnQkFDbEJqQixFQUFLa0IsU0FBVSxjQUVmVCxFQUFTQyxXQUFZLFdBRWpCVixFQUFLWSxLQUNESSxVQUFXLFNBR2ZoQixFQUFLaUIsWUFBYSxlQUVuQixLQUVDVixFQUFRWSxRQUFVLE9BRWxCZCxFQUFLTyxLQUNESSxVQUFXLE9BQ1hJLGFBQWMsSUFHbEJOLEtBR0pWLEVBQVVRLEtBQU9TLFFBQVMsU0FFdEJyQixFQUFLRSxLQUFLLHFCQUFx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U0FFYnFCLEVBQU91RCxVQUFXLE1BQ0UsR0FBYnBELElBQ1BILEVBQU85QixLQUNINkMsUUFBUyxLQUViZixFQUFPd0QsU0FBV3pDLFFBQVMsR0FBSyxNQUdwQ2YsRUFBT3hDLEtBQU0sTUFBT3lCLElBQ2hCRSxNQUFTLFNBQVVHLEdBQ2YsR0FBSWtELEdBQVF6RixFQUFHRyxNQUFPc0YsT0FFdEJsRCxHQUFFQyxrQkFFRmpDLEVBQUttRyxJQUFLbkcsRUFBS0UsS0FBTSxVQUFXOEQsR0FBSWtCLEdBQVFuRCxLQUFNLFVBQ2xEL0IsRUFBS29HLFFBQVMsVUFDZG5DLE9BU2hCbkUsR0FBTXlGLFlBQWMsV0FDaEIsTUFBT2pDLElBRVh4RCxFQUFNMEYsTUFBUSxXQUNadkIsS0FJRksiLCJmaWxlIjoidWkubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiKCBmdW5jdGlvbigpe1xuXG4gICAgJCggZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgJCggJy5wb3B1cCcgKS5lYWNoKCBmdW5jdGlvbigpe1xuXG4gICAgICAgICAgICBuZXcgUG9wdXAoICQodGhpcykgKTtcblxuICAgICAgICB9ICk7XG5cbiAgICB9ICk7XG5cblxuXG59ICkoKTtcblxudmFyIFBvcHVwID0gZnVuY3Rpb24oIG9iaiApe1xuXG4gICAgLy9wcml2YXRlIHByb3BlcnRpZXNcbiAgICB2YXIgX3NlbGYgPSB0aGlzLFxuICAgICAgICBfcG9wdXBQYWRkaW5nID0gNDAsXG4gICAgICAgIF9idG5TaG93ID0gICQoICcucG9wdXBfX29wZW4nICksXG4gICAgICAgIF9vYmogPSBvYmosXG4gICAgICAgIF9idG5DbG9zZSA9IF9vYmouZmluZCggJy5wb3B1cF9fY2xvc2UsIC5wb3B1cF9fY2FuY2VsJyApLFxuICAgICAgICBfd3JhcCA9IF9vYmouZmluZCggJy5wb3B1cF9fd3JhcCcgKSxcbiAgICAgICAgX2NvbnRlbnRzID0gX29iai5maW5kKCAnLnBvcHVwX19jb250ZW50JyApLFxuICAgICAgICBfZG9tID0gJCggJ2h0bWwsIGJvZHknICksXG4gICAgICAgIF9jb250ZW50ID0gJCggJy5zaXRlX19jb250ZW50JyApLFxuICAgICAgICBfd2luZG93ID0gJCggd2luZG93ICksXG4gICAgICAgIF90aW1lciA9IHNldFRpbWVvdXQoIGZ1bmN0aW9uKCl7fSwgMSApO1xuXG4gICAgLy9wcml2YXRlIG1ldGhvZHNcbiAgICB2YXIgX2NlbnRlcldyYXAgPSBmdW5jdGlvbigpe1xuICAgICAgICAgICAgaWYgKCBfd2luZG93LmhlaWdodCgpIC0gKCBfcG9wdXBQYWRkaW5nICogMiApIC0gX3dyYXAuaGVpZ2h0KCkgPiAwICkge1xuICAgICAgICAgICAgICAgIF93cmFwLmNzcyggeyB0b3A6ICggKCBfd2luZG93LmhlaWdodCgpIC0gKCBfcG9wdXBQYWRkaW5nICogMiApICkgLSBfd3JhcC5oZWlnaHQoKSApIC8gMiB9ICk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIF93cmFwLmNzcyggeyB0b3A6IDAgfSApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBfY2hhbmdlQ29udGVudFppbmRleCA9IGZ1bmN0aW9uICgpe1xuICAgICAgICAgICAgX2NvbnRlbnQuY3NzKCB7XG4gICAgICAgICAgICAgICAgJ3otaW5kZXgnOiA0XG4gICAgICAgICAgICB9ICk7XG4gICAgICAgIH0sXG4gICAgICAgIF9yZXNldENvbnRlbnRaaW5kZXggPSBmdW5jdGlvbiAoKXtcbiAgICAgICAgICAgIF9jb250ZW50LmNzcygge1xuICAgICAgICAgICAgICAgICd6LWluZGV4JzogMlxuICAgICAgICAgICAgfSApO1xuICAgICAgICB9LFxuICAgICAgICBfZ2V0U2Nyb2xsV2lkdGggPSBmdW5jdGlvbiAoKXtcbiAgICAgICAgICAgIHZhciBzY3JvbGxEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCAnZGl2JyksXG4gICAgICAgICAgICAgICAgc2Nyb2xsQmFyV2lkdGg7XG5cbiAgICAgICAgICAgIHNjcm9sbERpdi5jbGFzc05hbWUgPSAncG9wdXBfX3Njcm9sbGJhci1tZWFzdXJlJztcblxuICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCggc2Nyb2xsRGl2ICk7XG5cbiAgICAgICAgICAgIHNjcm9sbEJhcldpZHRoID0gc2Nyb2xsRGl2Lm9mZnNldFdpZHRoIC0gc2Nyb2xsRGl2LmNsaWVudFdpZHRoO1xuXG4gICAgICAgICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKHNjcm9sbERpdik7XG5cbiAgICAgICAgICAgIHJldHVybiBzY3JvbGxCYXJXaWR0aDtcbiAgICAgICAgfSxcbiAgICAgICAgX2hpZGUgPSBmdW5jdGlvbigpe1xuICAgICAgICAgICAgX29iai5jc3MoIHtcbiAgICAgICAgICAgICAgICBvdmVyZmxvd1k6ICdoaWRkZW4nXG4gICAgICAgICAgICB9ICk7XG5cbiAgICAgICAgICAgIF9vYmoucmVtb3ZlQ2xhc3MoICdwb3B1cF9vcGVuZWQnICk7XG4gICAgICAgICAgICBfb2JqLmFkZENsYXNzKCAncG9wdXBfaGlkZScgKTtcblxuICAgICAgICAgICAgX3RpbWVyID0gc2V0VGltZW91dCggZnVuY3Rpb24oKXtcblxuICAgICAgICAgICAgICAgIF9vYmouY3NzICh7XG4gICAgICAgICAgICAgICAgICAgIG92ZXJmbG93WTogJ2F1dG8nXG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICBfb2JqLnJlbW92ZUNsYXNzKCAncG9wdXBfaGlkZScgKTtcblxuICAgICAgICAgICAgfSwgMzAwICk7XG5cbiAgICAgICAgICAgIGlmKCBfd2luZG93LndpZHRoKCkgPCAxMDI0ICkge1xuXG4gICAgICAgICAgICAgICAgX2RvbS5jc3MoIHtcbiAgICAgICAgICAgICAgICAgICAgb3ZlcmZsb3dZOiAnYXV0bycsXG4gICAgICAgICAgICAgICAgICAgIHBhZGRpbmdSaWdodDogMFxuICAgICAgICAgICAgICAgIH0gKTtcblxuICAgICAgICAgICAgICAgIF9yZXNldENvbnRlbnRaaW5kZXgoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgX2NvbnRlbnRzLmNzcyggeyBkaXNwbGF5OiAnbm9uZScgfSApO1xuXG4gICAgICAgICAgICBpZiggX29iai5maW5kKCcucG9wdXBfX2FkZHJlc3NlcycpLmxlbmd0aCApIHtcblxuICAgICAgICAgICAgICAgIF9vYmouZmluZCgnLnBvcHVwX19hZGRyZXNzZXMnKS5jaGlsZHJlbigpLmNzcyggeyBkaXNwbGF5OiAnbm9uZScgfSApO1xuICAgICAgICAgICAgICAgIF9vYmouZmluZCgnLnBvcHVwX19hZGRyZXNzZXMnKS5jaGlsZHJlbigpLmh0bWwoJycpO1xuICAgICAgICAgICAgICAgIF9idG5TaG93LnJlbW92ZUNsYXNzKCdhamF4LWJsb2NrX19idG5fbG9hZGVkJyk7XG5cbiAgICAgICAgICAgIH1cblxuICAgICAgICB9LFxuICAgICAgICBfaW5pdCA9IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICBfb2JqWyAwIF0ub2JqID0gX3NlbGY7XG4gICAgICAgICAgICBfb25FdmVudHMoKTtcbiAgICAgICAgfSxcbiAgICAgICAgX29uRXZlbnRzID0gZnVuY3Rpb24oKXtcbiAgICAgICAgICAgIF93aW5kb3cub24oIHtcbiAgICAgICAgICAgICAgICByZXNpemU6IGZ1bmN0aW9uKCl7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYoIF93aW5kb3cud2lkdGgoKSA8IDEwMjQgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfaGlkZSgpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgLy9fY2VudGVyV3JhcCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gKTtcblxuICAgICAgICAgICAgX2J0blNob3cub24oIHtcbiAgICAgICAgICAgICAgICBjbGljazogZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICAgICAgX3Nob3coICQoIHRoaXMgKS5hdHRyKCAnZGF0YS1wb3B1cCcgKSApO1xuXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9ICk7XG5cbiAgICAgICAgICAgIF93cmFwLm9uKCB7XG4gICAgICAgICAgICAgICAgY2xpY2s6IGZ1bmN0aW9uKCBlICl7XG4gICAgICAgICAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSApO1xuICAgICAgICAgICAgX29iai5vbigge1xuICAgICAgICAgICAgICAgIGNsaWNrOiBmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgICAgICBfaGlkZSgpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSApO1xuICAgICAgICAgICAgX2J0bkNsb3NlLm9uKCB7XG4gICAgICAgICAgICAgICAgY2xpY2s6IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgICAgIF9oaWRlKCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9ICk7XG4gICAgICAgIH0sXG4gICAgICAgIF9zaG93ID0gZnVuY3Rpb24oIGNsYXNzTmFtZSApe1xuICAgICAgICAgICAgX3NldFBvcHVwQ29udGVudCggY2xhc3NOYW1lICk7XG5cbiAgICAgICAgICAgIF9vYmouYWRkQ2xhc3MoICdwb3B1cF9vcGVuZWQnICk7XG5cbiAgICAgICAgICAgIGlmKCBfd2luZG93LndpZHRoKCkgPCAxMDI0ICkge1xuXG4gICAgICAgICAgICAgICAgX2RvbS5jc3MoIHtcbiAgICAgICAgICAgICAgICAgICAgb3ZlcmZsb3dZOiAnaGlkZGVuJ1xuICAgICAgICAgICAgICAgIH0gKTtcblxuICAgICAgICAgICAgICAgIF9jaGFuZ2VDb250ZW50WmluZGV4KCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgfSxcbiAgICAgICAgX3NldFBvcHVwQ29udGVudCA9IGZ1bmN0aW9uKCBjbGFzc05hbWUgKXtcbiAgICAgICAgICAgIHZhciBjdXJDb250ZW50ID0gX2NvbnRlbnRzLmZpbHRlciggJy5wb3B1cF9fJyArIGNsYXNzTmFtZSApO1xuXG4gICAgICAgICAgICAvL19jb250ZW50cy5jc3MoIHsgZGlzcGxheTogJ25vbmUnIH0gKTtcbiAgICAgICAgICAgIGN1ckNvbnRlbnQuY3NzKCB7IGRpc3BsYXk6ICdibG9jaycgfSApO1xuXG4gICAgICAgIH07XG5cbiAgICAvL3B1YmxpYyBwcm9wZXJ0aWVzXG5cbiAgICAvL3B1YmxpYyBtZXRob2RzXG5cbiAgICBfaW5pdCgpO1xufTsiLCIoIGZ1bmN0aW9uKCl7XG5cbiAgICAkKCBmdW5jdGlvbigpe1xuICAgICAgICAkKCAnc2VsZWN0JyApLmVhY2goIGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICBuZXcgV2Vic3RlcnNTZWxlY3QoIHtcbiAgICAgICAgICAgICAgICBvYmo6ICQoIHRoaXMgKSxcbiAgICAgICAgICAgICAgICBvcHRpb25UeXBlOiAxLFxuICAgICAgICAgICAgICAgIHNob3dUeXBlOiAyXG4gICAgICAgICAgICB9ICk7XG4gICAgICAgIH0gKTtcbiAgICB9ICk7XG5cbiAgICB2YXIgV2Vic3RlcnNTZWxlY3QgPSBmdW5jdGlvbiggcGFyYW1zICl7XG5cbiAgICAgICAgLy9wcml2YXRlIHByb3BlcnRpZXNcbiAgICAgICAgdmFyIF9zZWxmID0gdGhpcyxcbiAgICAgICAgICAgIF9vYmogPSBwYXJhbXMub2JqLFxuICAgICAgICAgICAgX29wdGlvblR5cGUgPSBwYXJhbXMub3B0aW9uVHlwZSB8fCAwLFxuICAgICAgICAgICAgX3Nob3dUeXBlID0gcGFyYW1zLnNob3dUeXBlIHx8IDAsXG4gICAgICAgICAgICBfdmlzaWJsZSA9IHBhcmFtcy52aXNpYmxlIHx8IDUsXG4gICAgICAgICAgICBfZGV2aWNlID0gL0FuZHJvaWR8d2ViT1N8aVBob25lfGlQYWR8aVBvZHxCbGFja0JlcnJ5fElFTW9iaWxlfE9wZXJhIE1pbmkvaS50ZXN0KCBuYXZpZ2F0b3IudXNlckFnZW50ICksXG4gICAgICAgICAgICBfdGV4dCA9ICQoICc8c3BhbiBjbGFzcz1cIndlYnN0ZXJzLXNlbGVjdF9faXRlbVwiPjwvc3Bhbj4nICksXG4gICAgICAgICAgICBfd3JhcCA9ICQoICc8ZGl2IGNsYXNzPVwid2Vic3RlcnMtc2VsZWN0XCI+PC9kaXY+JyApLFxuICAgICAgICAgICAgX3dpbmRvdyA9ICQoIHdpbmRvdyApLFxuICAgICAgICAgICAgX2JvZHkgPSAkKCAnYm9keScgKSxcbiAgICAgICAgICAgIF9vcGVuZWQgPSBmYWxzZSxcbiAgICAgICAgICAgIF9wb3B1cCwgX3Njcm9sbDtcblxuICAgICAgICAvL3ByaXZhdGUgbWV0aG9kc1xuICAgICAgICB2YXIgX2FkZFdyYXAgPSBmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgIHZhciBjdXJUZXh0ID0gJyc7XG5cbiAgICAgICAgICAgICAgICBfb2JqLmNzcygge1xuICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAwXG4gICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICAgICAgX29iai53cmFwKCBfd3JhcCApO1xuICAgICAgICAgICAgICAgIF93cmFwID0gX29iai5wYXJlbnQoKTtcbiAgICAgICAgICAgICAgICBfd3JhcC5hcHBlbmQoICc8ZGl2IGNsYXNzPVwid2Vic3RlcnMtc2VsZWN0X19hcnJvd1wiPjwvZGl2PicgKTtcbiAgICAgICAgICAgICAgICBfb2JqLmJlZm9yZSggX3RleHQgKTtcbiAgICAgICAgICAgICAgICBfb2JqLmZpbmQoICdvcHRpb24nICkuZWFjaCggZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGN1ckl0ZW0gPSAkKCB0aGlzICk7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYoIGN1ckl0ZW0uYXR0ciggJ3NlbGVjdGVkJyApID09ICdzZWxlY3RlZCcgKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1clRleHQgPSBjdXJJdGVtLnRleHQoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gKTtcblxuICAgICAgICAgICAgICAgIGlmKCBjdXJUZXh0ID09ICcnICl7XG4gICAgICAgICAgICAgICAgICAgIGN1clRleHQgPSAgX29iai5maW5kKCAnb3B0aW9uJykuZXEoIDAgKS50ZXh0KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIF90ZXh0LnRleHQoIGN1clRleHQgKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfaGlkZVBvcHVwID0gZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICBfb3BlbmVkID0gZmFsc2U7XG5cbiAgICAgICAgICAgICAgICBpZiggIV9zaG93VHlwZSApe1xuICAgICAgICAgICAgICAgICAgICBfcG9wdXAuY3NzKCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkaXNwbGF5OiAnbm9uZSdcbiAgICAgICAgICAgICAgICAgICAgfSApO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiggX3Nob3dUeXBlID09IDEgKXtcbiAgICAgICAgICAgICAgICAgICAgX3BvcHVwLnN0b3AoIHRydWUsIGZhbHNlICkuc2xpZGVVcCggMzAwLCBmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgICAgICAgICAgX3BvcHVwLnJlbW92ZSgpO1xuICAgICAgICAgICAgICAgICAgICB9ICk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmKCBfc2hvd1R5cGUgPT0gMiApIHtcbiAgICAgICAgICAgICAgICAgICAgX3BvcHVwLnN0b3AoIHRydWUsIGZhbHNlICkuZmFkZU91dCggMzAwLCBmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgICAgICAgICAgX3BvcHVwLnJlbW92ZSgpO1xuICAgICAgICAgICAgICAgICAgICB9ICk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgX3dyYXAucmVtb3ZlQ2xhc3MoICd3ZWJzdGVycy1zZWxlY3Rfb3BlbmVkJyApO1xuXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX2NvbnN0cnVjdG9yID0gZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICBfb2JqWyAwIF0ub2JqID0gX3NlbGY7XG5cbiAgICAgICAgICAgICAgICBfYWRkV3JhcCgpO1xuICAgICAgICAgICAgICAgIF9zZWxlY3RWaWV3VHlwZSgpO1xuICAgICAgICAgICAgICAgIF9vbkV2ZW50cygpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9vbkV2ZW50cyA9IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgX29iai5vbiggJ2NoYW5nZScsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICBfdGV4dC50ZXh0KCAkKCB0aGlzICkuZmluZCggJ29wdGlvbjpzZWxlY3RlZCcgKS50ZXh0KCkgKTtcbiAgICAgICAgICAgICAgICB9ICk7XG5cbiAgICAgICAgICAgICAgICBpZiggX29wdGlvblR5cGUgPT0gMSAmJiAhX2RldmljZSApe1xuICAgICAgICAgICAgICAgICAgICBfd3JhcC5vbigge1xuICAgICAgICAgICAgICAgICAgICAgICAgJ2NsaWNrJzogZnVuY3Rpb24oIGUgKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoIF9vcGVuZWQgKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2hpZGVQb3B1cCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9zaG93UG9wdXAoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICAgICAgICAgIF93aW5kb3cub24oIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICdjbGljayc6IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoIF9vcGVuZWQgKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2hpZGVQb3B1cCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSApO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICQoJy5uaWNlLXNjcm9sbCcpLm9uKCB7XG5cbiAgICAgICAgICAgICAgICAgICAgc2Nyb2xsOiBmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoIF9vcGVuZWQgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX2hpZGVQb3B1cCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIH0gKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfc2VsZWN0Vmlld1R5cGUgPSBmdW5jdGlvbigpe1xuXG4gICAgICAgICAgICAgICAgaWYoICFfb3B0aW9uVHlwZSB8fCBfZGV2aWNlICl7XG4gICAgICAgICAgICAgICAgICAgIF9zZXRNb2JpbGVWaWV3KCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmKCBfb3B0aW9uVHlwZSA9PSAxICl7XG4gICAgICAgICAgICAgICAgICAgIF9zZXRDdXN0b20xKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9zZXRDdXN0b20xID0gZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICBfd3JhcC5hZGRDbGFzcyggJ3dlYnN0ZXJzLXNlbGVjdF9jdXN0b20nICk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX3NldE1vYmlsZVZpZXcgPSBmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgIF93cmFwLmFkZENsYXNzKCAnd2Vic3RlcnMtc2VsZWN0X21vYmlsZScgKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfc2hvd1BvcHVwID0gZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICB2YXIgc2VsZWN0cyA9ICQoICdzZWxlY3QnICksXG4gICAgICAgICAgICAgICAgICAgIGxpc3QgPSAkKCAnPHVsPjwvdWw+JyksXG4gICAgICAgICAgICAgICAgICAgIGN1clNjcm9sbCA9IF93aW5kb3cuc2Nyb2xsVG9wKCksXG4gICAgICAgICAgICAgICAgICAgIG9mZnNldCA9IF93cmFwLm9mZnNldCgpLFxuICAgICAgICAgICAgICAgICAgICBtYXhIZWlnaHQgPSAwLFxuICAgICAgICAgICAgICAgICAgICBjdXJJbmRleCA9IF9vYmouZmluZCggJ29wdGlvbjpzZWxlY3RlZCcgKS5pbmRleCgpLFxuICAgICAgICAgICAgICAgICAgICBpZCA9IE1hdGgucm91bmQoIE1hdGgucmFuZG9tKCkgKiAxMDAwICk7XG5cbiAgICAgICAgICAgICAgICBzZWxlY3RzLmVhY2goIGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgICAgIGlmKCB0aGlzICE9PSBfb2JqWyAwIF0gJiYgdGhpcy5vYmouY2hlY2tPcGVuZWQoKSApe1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5vYmouY2xvc2UoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gKTtcblxuICAgICAgICAgICAgICAgIGlmKCBfb3BlbmVkICl7XG4gICAgICAgICAgICAgICAgICAgIF9wb3B1cC5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgX29wZW5lZCA9IHRydWU7XG5cbiAgICAgICAgICAgICAgICBfcG9wdXAgPSAkKCAnPGRpdiBjbGFzcz1cIndlYnN0ZXJzLXNlbGVjdF9fcG9wdXBcIiBpZD1cIndlYnN0ZXJzLXNlbGVjdF9fcG9wdXAnICsgaWQgKyAnXCI+PC9kaXY+JyApO1xuXG4gICAgICAgICAgICAgICAgX29iai5maW5kKCAnb3B0aW9uJyApLmVhY2goIGZ1bmN0aW9uKCBpICl7XG4gICAgICAgICAgICAgICAgICAgIHZhciBjdXJJdGVtID0gJCggdGhpcyApO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmKCBpID09IGN1ckluZGV4ICl7XG4gICAgICAgICAgICAgICAgICAgICAgICBsaXN0LmFwcGVuZCggJzxsaSBjbGFzcz1cImFjdGl2ZVwiPicgKyBjdXJJdGVtLnRleHQoKSArICc8L2xpPicgKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxpc3QuYXBwZW5kKCAnPGxpPicgKyBjdXJJdGVtLnRleHQoKSArICc8L2xpPicgKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICAgICAgX3BvcHVwLmFwcGVuZCggbGlzdCApO1xuICAgICAgICAgICAgICAgIF9ib2R5LmFwcGVuZCggX3BvcHVwICk7XG4gICAgICAgICAgICAgICAgX3dyYXAuYWRkQ2xhc3MoICd3ZWJzdGVycy1zZWxlY3Rfb3BlbmVkJyApO1xuXG4gICAgICAgICAgICAgICAgX3BvcHVwLmNzcygge1xuICAgICAgICAgICAgICAgICAgICB3aWR0aDogX3dyYXAub3V0ZXJXaWR0aCgpLFxuICAgICAgICAgICAgICAgICAgICBsZWZ0OiBvZmZzZXQubGVmdCxcbiAgICAgICAgICAgICAgICAgICAgdG9wOiBvZmZzZXQudG9wICsgX3dyYXAub3V0ZXJIZWlnaHQoKVxuICAgICAgICAgICAgICAgIH0gKTtcblxuICAgICAgICAgICAgICAgIG1heEhlaWdodCA9IF9wb3B1cC5vdXRlckhlaWdodCgpO1xuICAgICAgICAgICAgICAgIGlmKCBtYXhIZWlnaHQgPiBfcG9wdXAuZmluZCggJ2xpJyApLmVxKCAwICkub3V0ZXJIZWlnaHQoKSAqIF92aXNpYmxlICl7XG4gICAgICAgICAgICAgICAgICAgIF9wb3B1cC5oZWlnaHQoIF9wb3B1cC5maW5kKCAnbGknICkuZXEoIDAgKS5vdXRlckhlaWdodCgpICogX3Zpc2libGUgKTtcbiAgICAgICAgICAgICAgICAgICAgX3Njcm9sbCA9IF9wb3B1cC5uaWNlU2Nyb2xsKCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBob3JpenJhaWxlbmFibGVkOiBmYWxzZVxuICAgICAgICAgICAgICAgICAgICB9ICk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYoIF9zaG93VHlwZSA9PSAxICl7XG4gICAgICAgICAgICAgICAgICAgIF9wb3B1cC5jc3MoIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6ICdub25lJ1xuICAgICAgICAgICAgICAgICAgICB9ICk7XG4gICAgICAgICAgICAgICAgICAgIF9wb3B1cC5zbGlkZURvd24oIDMwMCApO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiggX3Nob3dUeXBlID09IDIgKSB7XG4gICAgICAgICAgICAgICAgICAgIF9wb3B1cC5jc3MoIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDAuMVxuICAgICAgICAgICAgICAgICAgICB9ICk7XG4gICAgICAgICAgICAgICAgICAgIF9wb3B1cC5hbmltYXRlKCB7IG9wYWNpdHk6IDEgfSwgMzAwKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBfcG9wdXAuZmluZCggJ2xpJyApLm9uKCB7XG4gICAgICAgICAgICAgICAgICAgICdjbGljayc6IGZ1bmN0aW9uKCBlICl7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgaW5kZXggPSAkKCB0aGlzICkuaW5kZXgoKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgX29iai52YWwoIF9vYmouZmluZCggJ29wdGlvbicgKS5lcSggaW5kZXggKS5hdHRyKCAndmFsdWUnICkgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9vYmoudHJpZ2dlciggJ2NoYW5nZScgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9oaWRlUG9wdXAoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gKTtcblxuICAgICAgICAgICAgfTtcblxuICAgICAgICAvL3B1YmxpYyBwcm9wZXJ0aWVzXG5cbiAgICAgICAgLy9wdWJsaWMgbWV0aG9kc1xuICAgICAgICBfc2VsZi5jaGVja09wZW5lZCA9IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICByZXR1cm4gX29wZW5lZDtcbiAgICAgICAgfTtcbiAgICAgICAgX3NlbGYuY2xvc2UgPSBmdW5jdGlvbigpe1xuICAgICAgICAgIF9oaWRlUG9wdXAoKTtcbiAgICAgICAgfTtcblxuXG4gICAgICAgIF9jb25zdHJ1Y3RvcigpO1xuXG4gICAgfTtcblxufSApKCk7Il0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
