!function(){$(function(){$(".popup").each(function(){new o($(this))})});var o=function(o){var n=this,t=40,i=$(".popup__open"),e=o,p=e.find(".popup__close, .popup__cancel"),c=e.find(".popup__wrap"),u=e.find(".popup__content"),s=$("html"),d=$(window),a=setTimeout(function(){},1),f=function(){d.height()-2*t-c.height()>0?c.css({top:(d.height()-2*t-c.height())/2}):c.css({top:0})},r=function(){var o,n=document.createElement("div");return n.className="popup__scrollbar-measure",document.body.appendChild(n),o=n.offsetWidth-n.clientWidth,document.body.removeChild(n),o},l=function(){e.css({overflowY:"hidden"}),s.css({overflowY:"auto",paddingRight:0}),e.removeClass("popup_opened"),e.addClass("popup_hide"),a=setTimeout(function(){e.css({overflowY:"auto"}),e.removeClass("popup_hide")},300)},h=function(){e[0].obj=n,_()},_=function(){d.on({resize:function(){f()}}),i.on({click:function(){return m($(this).attr("data-popup")),!1}}),c.on({click:function(o){o.stopPropagation()}}),e.on({click:function(){return l(),!1}}),p.on({click:function(){return l(),!1}})},m=function(o){v(o),s.css({overflowY:"hidden",paddingRight:r()}),e.addClass("popup_opened"),f()},v=function(o){var n=u.filter(".popup__"+o);u.css({display:"none"}),n.css({display:"block"})};h()}}();
!function(){$(function(){$("select").each(function(){new e({obj:$(this),optionType:1,showType:2})})});var e=function(e){var t,i,n=this,o=e.obj,s=e.optionType||0,c=e.showType||0,a=e.visible||5,l=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),d=$('<span class="websters-select__item"></span>'),p=$('<div class="websters-select"></div>'),r=$(window),f=$("body"),u=!1,h=function(){var e="";o.css({opacity:0}),o.wrap(p),p=o.parent(),p.append('<div class="websters-select__arrow"></div>'),o.before(d),o.find("option").each(function(){var t=$(this);"selected"==t.attr("selected")&&(e=t.text())}),""==e&&(e=o.find("option").eq(0).text()),d.text(e)},v=function(){u=!1,c?1==c?t.stop(!0,!1).slideUp(300,function(){t.remove()}):2==c&&t.stop(!0,!1).fadeOut(300,function(){t.remove()}):t.css({display:"none"}),p.removeClass("websters-select_opened")},b=function(){o[0].obj=n,h(),g(),w()},w=function(){o.on("change",function(){d.text($(this).find("option:selected").text())}),1!=s||l||(p.on({click:function(e){e.stopPropagation(),u?v():m()}}),r.on({click:function(){u&&v()}}))},g=function(){!s||l?y():1==s&&_()},_=function(){p.addClass("websters-select_custom")},y=function(){p.addClass("websters-select_mobile")},m=function(){var e=$("select"),n=$("<ul></ul>"),s=(r.scrollTop(),p.offset()),l=0,d=o.find("option:selected").index(),h=Math.round(1e3*Math.random());e.each(function(){this!==o[0]&&this.obj.checkOpened()&&this.obj.close()}),u&&t.remove(),u=!0,t=$('<div class="websters-select__popup" id="websters-select__popup'+h+'"></div>'),o.find("option").each(function(e){var t=$(this);e==d?n.append('<li class="active">'+t.text()+"</li>"):n.append("<li>"+t.text()+"</li>")}),t.append(n),f.append(t),p.addClass("websters-select_opened"),t.css({width:p.outerWidth(),left:s.left,top:s.top+p.outerHeight()}),l=t.outerHeight(),l>t.find("li").eq(0).outerHeight()*a&&(t.height(t.find("li").eq(0).outerHeight()*a),i=t.niceScroll({horizrailenabled:!1})),1==c?(t.css({display:"none"}),t.slideDown(300)):2==c&&(t.css({opacity:.1}),t.animate({opacity:1},300)),t.find("li").on({click:function(e){var t=$(this).index();e.stopPropagation(),o.val(o.find("option").eq(t).attr("value")),o.trigger("change"),v()}})};n.checkOpened=function(){return u},n.close=function(){v()},b()}}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImpxdWVyeS5wb3B1cC5qcyIsImpxdWVyeS53ZWJzdGVycy1zZWxlY3QuanMiXSwibmFtZXMiOlsiJCIsImVhY2giLCJQb3B1cCIsInRoaXMiLCJvYmoiLCJfc2VsZiIsIl9wb3B1cFBhZGRpbmciLCJfYnRuU2hvdyIsIl9vYmoiLCJfYnRuQ2xvc2UiLCJmaW5kIiwiX3dyYXAiLCJfY29udGVudHMiLCJfc2Nyb2xsQ29udGVpbmVyIiwiX3dpbmRvdyIsIndpbmRvdyIsIl90aW1lciIsInNldFRpbWVvdXQiLCJfY2VudGVyV3JhcCIsImhlaWdodCIsImNzcyIsInRvcCIsIl9nZXRTY3JvbGxXaWR0aCIsInNjcm9sbEJhcldpZHRoIiwic2Nyb2xsRGl2IiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50IiwiY2xhc3NOYW1lIiwiYm9keSIsImFwcGVuZENoaWxkIiwib2Zmc2V0V2lkdGgiLCJjbGllbnRXaWR0aCIsInJlbW92ZUNoaWxkIiwiX2hpZGUiLCJvdmVyZmxvd1kiLCJwYWRkaW5nUmlnaHQiLCJyZW1vdmVDbGFzcyIsImFkZENsYXNzIiwiX2luaXQiLCJfb25FdmVudHMiLCJvbiIsInJlc2l6ZSIsImNsaWNrIiwiX3Nob3ciLCJhdHRyIiwiZSIsInN0b3BQcm9wYWdhdGlvbiIsIl9zZXRQb3B1cENvbnRlbnQiLCJjdXJDb250ZW50IiwiZmlsdGVyIiwiZGlzcGxheSIsIldlYnN0ZXJzU2VsZWN0Iiwib3B0aW9uVHlwZSIsInNob3dUeXBlIiwicGFyYW1zIiwiX3BvcHVwIiwiX3Njcm9sbCIsIl9vcHRpb25UeXBlIiwiX3Nob3dUeXBlIiwiX3Zpc2libGUiLCJ2aXNpYmxlIiwiX2RldmljZSIsInRlc3QiLCJuYXZpZ2F0b3IiLCJ1c2VyQWdlbnQiLCJfdGV4dCIsIl9ib2R5IiwiX29wZW5lZCIsIl9hZGRXcmFwIiwiY3VyVGV4dCIsIm9wYWNpdHkiLCJ3cmFwIiwicGFyZW50IiwiYXBwZW5kIiwiYmVmb3JlIiwiY3VySXRlbSIsInRleHQiLCJlcSIsIl9oaWRlUG9wdXAiLCJzdG9wIiwic2xpZGVVcCIsInJlbW92ZSIsImZhZGVPdXQiLCJfY29uc3RydWN0b3IiLCJfc2VsZWN0Vmlld1R5cGUiLCJfc2hvd1BvcHVwIiwiX3NldE1vYmlsZVZpZXciLCJfc2V0Q3VzdG9tMSIsInNlbGVjdHMiLCJsaXN0Iiwib2Zmc2V0Iiwic2Nyb2xsVG9wIiwibWF4SGVpZ2h0IiwiY3VySW5kZXgiLCJpbmRleCIsImlkIiwiTWF0aCIsInJvdW5kIiwicmFuZG9tIiwiY2hlY2tPcGVuZWQiLCJjbG9zZSIsImkiLCJ3aWR0aCIsIm91dGVyV2lkdGgiLCJsZWZ0Iiwib3V0ZXJIZWlnaHQiLCJuaWNlU2Nyb2xsIiwiaG9yaXpyYWlsZW5hYmxlZCIsInNsaWRlRG93biIsImFuaW1hdGUiLCJ2YWwiLCJ0cmlnZ2VyIl0sIm1hcHBpbmdzIjoiQ0FBQSxXQUVJQSxFQUFHLFdBRUNBLEVBQUcsVUFBV0MsS0FBSyxXQUVmLEdBQUlDLEdBQU1GLEVBQUVHLFVBTXBCLElBQUlELEdBQVEsU0FBVUUsR0FHbEIsR0FBSUMsR0FBUUYsS0FDUkcsRUFBZ0IsR0FDaEJDLEVBQVlQLEVBQUcsZ0JBQ2ZRLEVBQU9KLEVBQ1BLLEVBQVlELEVBQUtFLEtBQU0saUNBQ3ZCQyxFQUFRSCxFQUFLRSxLQUFNLGdCQUNuQkUsRUFBWUosRUFBS0UsS0FBTSxtQkFDdkJHLEVBQW1CYixFQUFHLFFBQ3RCYyxFQUFVZCxFQUFHZSxRQUNiQyxFQUFTQyxXQUFZLGFBQWMsR0FHbkNDLEVBQWMsV0FDTEosRUFBUUssU0FBNkIsRUFBaEJiLEVBQXNCSyxFQUFNUSxTQUFXLEVBQzdEUixFQUFNUyxLQUFPQyxLQUFTUCxFQUFRSyxTQUE2QixFQUFoQmIsRUFBd0JLLEVBQU1RLFVBQWEsSUFFdEZSLEVBQU1TLEtBQU9DLElBQUssS0FHMUJDLEVBQWtCLFdBQ2QsR0FDSUMsR0FEQUMsRUFBWUMsU0FBU0MsY0FBZSxNQVd4QyxPQVJBRixHQUFVRyxVQUFZLDJCQUV0QkYsU0FBU0csS0FBS0MsWUFBYUwsR0FFM0JELEVBQWlCQyxFQUFVTSxZQUFjTixFQUFVTyxZQUVuRE4sU0FBU0csS0FBS0ksWUFBWVIsR0FFbkJELEdBRVhVLEVBQVEsV0FDSnpCLEVBQUtZLEtBQ0RjLFVBQVcsV0FFZnJCLEVBQWlCTyxLQUNiYyxVQUFXLE9BQ1hDLGFBQWMsSUFHbEIzQixFQUFLNEIsWUFBYSxnQkFDbEI1QixFQUFLNkIsU0FBVSxjQUVmckIsRUFBU0MsV0FBWSxXQUVqQlQsRUFBS1ksS0FDRGMsVUFBVyxTQUdmMUIsRUFBSzRCLFlBQWEsZUFDbkIsTUFHUEUsRUFBUSxXQUNKOUIsRUFBTSxHQUFJSixJQUFNQyxFQUNoQmtDLEtBRUpBLEVBQVksV0FDUnpCLEVBQVEwQixJQUNKQyxPQUFRLFdBQ0p2QixPQUdSWCxFQUFTaUMsSUFDTEUsTUFBTyxXQUVILE1BREFDLEdBQU8zQyxFQUFHRyxNQUFPeUMsS0FBTSxnQkFDaEIsS0FHZmpDLEVBQU02QixJQUNGRSxNQUFPLFNBQVVHLEdBQ2JBLEVBQUVDLHFCQUdWdEMsRUFBS2dDLElBQ0RFLE1BQU8sV0FFSCxNQURBVCxNQUNPLEtBR2Z4QixFQUFVK0IsSUFDTkUsTUFBTyxXQUVILE1BREFULE1BQ08sTUFJbkJVLEVBQVEsU0FBVWhCLEdBQ2RvQixFQUFrQnBCLEdBRWxCZCxFQUFpQk8sS0FDYmMsVUFBVyxTQUNYQyxhQUFjYixNQUVsQmQsRUFBSzZCLFNBQVUsZ0JBQ2ZuQixLQUdKNkIsRUFBbUIsU0FBVXBCLEdBQ3pCLEdBQUlxQixHQUFhcEMsRUFBVXFDLE9BQVEsV0FBYXRCLEVBRWhEZixHQUFVUSxLQUFPOEIsUUFBUyxTQUMxQkYsRUFBVzVCLEtBQU84QixRQUFTLFVBUW5DWjtDQy9IUixXQUVJdEMsRUFBRyxXQUNDQSxFQUFHLFVBQVdDLEtBQU0sV0FDaEIsR0FBSWtELElBQ0EvQyxJQUFLSixFQUFHRyxNQUNSaUQsV0FBWSxFQUNaQyxTQUFVLE9BS3RCLElBQUlGLEdBQWlCLFNBQVVHLEdBRzNCLEdBV0lDLEdBQVFDLEVBWFJuRCxFQUFRRixLQUNSSyxFQUFPOEMsRUFBT2xELElBQ2RxRCxFQUFjSCxFQUFPRixZQUFjLEVBQ25DTSxFQUFZSixFQUFPRCxVQUFZLEVBQy9CTSxFQUFXTCxFQUFPTSxTQUFXLEVBQzdCQyxFQUFVLGlFQUFpRUMsS0FBTUMsVUFBVUMsV0FDM0ZDLEVBQVFqRSxFQUFHLCtDQUNYVyxFQUFRWCxFQUFHLHVDQUNYYyxFQUFVZCxFQUFHZSxRQUNibUQsRUFBUWxFLEVBQUcsUUFDWG1FLEdBQVUsRUFJVkMsRUFBVyxXQUNQLEdBQUlDLEdBQVUsRUFFZDdELEdBQUtZLEtBQ0RrRCxRQUFTLElBR2I5RCxFQUFLK0QsS0FBTTVELEdBQ1hBLEVBQVFILEVBQUtnRSxTQUNiN0QsRUFBTThELE9BQVEsOENBQ2RqRSxFQUFLa0UsT0FBUVQsR0FDYnpELEVBQUtFLEtBQU0sVUFBV1QsS0FBTSxXQUN4QixHQUFJMEUsR0FBVTNFLEVBQUdHLEtBRWlCLGFBQTlCd0UsRUFBUS9CLEtBQU0sY0FDZHlCLEVBQVVNLEVBQVFDLFVBSVgsSUFBWFAsSUFDQUEsRUFBVzdELEVBQUtFLEtBQU0sVUFBVW1FLEdBQUksR0FBSUQsUUFFNUNYLEVBQU1XLEtBQU1QLElBRWhCUyxFQUFhLFdBQ1RYLEdBQVUsRUFFTFQsRUFJbUIsR0FBYkEsRUFDUEgsRUFBT3dCLE1BQU0sR0FBTSxHQUFRQyxRQUFTLElBQUssV0FDckN6QixFQUFPMEIsV0FFUyxHQUFidkIsR0FDUEgsRUFBT3dCLE1BQU0sR0FBTSxHQUFRRyxRQUFTLElBQUssV0FDckMzQixFQUFPMEIsV0FUWDFCLEVBQU9uQyxLQUNIOEIsUUFBUyxTQVlqQnZDLEVBQU15QixZQUFhLDJCQUd2QitDLEVBQWUsV0FDWDNFLEVBQU0sR0FBSUosSUFBTUMsRUFFaEIrRCxJQUNBZ0IsSUFDQTdDLEtBRUpBLEVBQVksV0FDUi9CLEVBQUtnQyxHQUFJLFNBQVUsV0FDZnlCLEVBQU1XLEtBQU01RSxFQUFHRyxNQUFPTyxLQUFNLG1CQUFvQmtFLFVBR2pDLEdBQWZuQixHQUFxQkksSUFDckJsRCxFQUFNNkIsSUFDRkUsTUFBUyxTQUFVRyxHQUNmQSxFQUFFQyxrQkFFRXFCLEVBQ0FXLElBRUFPLE9BTVp2RSxFQUFRMEIsSUFDSkUsTUFBUyxXQUNEeUIsR0FDQVcsU0FNcEJNLEVBQWtCLFlBRVQzQixHQUFlSSxFQUNoQnlCLElBQ3NCLEdBQWY3QixHQUNQOEIsS0FHUkEsRUFBYyxXQUNWNUUsRUFBTTBCLFNBQVUsMkJBRXBCaUQsRUFBaUIsV0FDYjNFLEVBQU0wQixTQUFVLDJCQUVwQmdELEVBQWEsV0FDVCxHQUFJRyxHQUFVeEYsRUFBRyxVQUNieUYsRUFBT3pGLEVBQUcsYUFFVjBGLEdBRFk1RSxFQUFRNkUsWUFDWGhGLEVBQU0rRSxVQUNmRSxFQUFZLEVBQ1pDLEVBQVdyRixFQUFLRSxLQUFNLG1CQUFvQm9GLFFBQzFDQyxFQUFLQyxLQUFLQyxNQUF1QixJQUFoQkQsS0FBS0UsU0FFMUJWLEdBQVF2RixLQUFNLFdBQ05FLE9BQVNLLEVBQU0sSUFBT0wsS0FBS0MsSUFBSStGLGVBQy9CaEcsS0FBS0MsSUFBSWdHLFVBSWJqQyxHQUNBWixFQUFPMEIsU0FFWGQsR0FBVSxFQUVWWixFQUFTdkQsRUFBRyxpRUFBbUUrRixFQUFLLFlBRXBGdkYsRUFBS0UsS0FBTSxVQUFXVCxLQUFNLFNBQVVvRyxHQUNsQyxHQUFJMUIsR0FBVTNFLEVBQUdHLEtBRWJrRyxJQUFLUixFQUNMSixFQUFLaEIsT0FBUSxzQkFBd0JFLEVBQVFDLE9BQVMsU0FFdERhLEVBQUtoQixPQUFRLE9BQVNFLEVBQVFDLE9BQVMsV0FLL0NyQixFQUFPa0IsT0FBUWdCLEdBQ2Z2QixFQUFNTyxPQUFRbEIsR0FDZDVDLEVBQU0wQixTQUFVLDBCQUVoQmtCLEVBQU9uQyxLQUNIa0YsTUFBTzNGLEVBQU00RixhQUNiQyxLQUFNZCxFQUFPYyxLQUNibkYsSUFBS3FFLEVBQU9yRSxJQUFNVixFQUFNOEYsZ0JBRzVCYixFQUFZckMsRUFBT2tELGNBQ2ZiLEVBQVlyQyxFQUFPN0MsS0FBTSxNQUFPbUUsR0FBSSxHQUFJNEIsY0FBZ0I5QyxJQUN4REosRUFBT3BDLE9BQVFvQyxFQUFPN0MsS0FBTSxNQUFPbUUsR0FBSSxHQUFJNEIsY0FBZ0I5QyxHQUMzREgsRUFBVUQsRUFBT21ELFlBQ2JDLGtCQUFrQixLQUlULEdBQWJqRCxHQUNBSCxFQUFPbkMsS0FDSDhCLFFBQVMsU0FFYkssRUFBT3FELFVBQVcsTUFDRSxHQUFibEQsSUFDUEgsRUFBT25DLEtBQ0hrRCxRQUFTLEtBRWJmLEVBQU9zRCxTQUFXdkMsUUFBUyxHQUFLLE1BR3BDZixFQUFPN0MsS0FBTSxNQUFPOEIsSUFDaEJFLE1BQVMsU0FBVUcsR0FDZixHQUFJaUQsR0FBUTlGLEVBQUdHLE1BQU8yRixPQUV0QmpELEdBQUVDLGtCQUVGdEMsRUFBS3NHLElBQUt0RyxFQUFLRSxLQUFNLFVBQVdtRSxHQUFJaUIsR0FBUWxELEtBQU0sVUFDbERwQyxFQUFLdUcsUUFBUyxVQUNkakMsT0FTaEJ6RSxHQUFNOEYsWUFBYyxXQUNoQixNQUFPaEMsSUFFWDlELEVBQU0rRixNQUFRLFdBQ1p0QixLQUlGSyIsImZpbGUiOiJ1aS5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIoIGZ1bmN0aW9uKCl7XHJcblxyXG4gICAgJCggZnVuY3Rpb24oKXtcclxuXHJcbiAgICAgICAgJCggJy5wb3B1cCcgKS5lYWNoKGZ1bmN0aW9uKCl7XHJcblxyXG4gICAgICAgICAgICBuZXcgUG9wdXAoJCh0aGlzKSk7XHJcblxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgIH0pO1xyXG5cclxuICAgIHZhciBQb3B1cCA9IGZ1bmN0aW9uKCBvYmogKXtcclxuXHJcbiAgICAgICAgLy9wcml2YXRlIHByb3BlcnRpZXNcclxuICAgICAgICB2YXIgX3NlbGYgPSB0aGlzLFxyXG4gICAgICAgICAgICBfcG9wdXBQYWRkaW5nID0gNDAsXHJcbiAgICAgICAgICAgIF9idG5TaG93ID0gICQoICcucG9wdXBfX29wZW4nICksXHJcbiAgICAgICAgICAgIF9vYmogPSBvYmosXHJcbiAgICAgICAgICAgIF9idG5DbG9zZSA9IF9vYmouZmluZCggJy5wb3B1cF9fY2xvc2UsIC5wb3B1cF9fY2FuY2VsJyApLFxyXG4gICAgICAgICAgICBfd3JhcCA9IF9vYmouZmluZCggJy5wb3B1cF9fd3JhcCcgKSxcclxuICAgICAgICAgICAgX2NvbnRlbnRzID0gX29iai5maW5kKCAnLnBvcHVwX19jb250ZW50JyApLFxyXG4gICAgICAgICAgICBfc2Nyb2xsQ29udGVpbmVyID0gJCggJ2h0bWwnICksXHJcbiAgICAgICAgICAgIF93aW5kb3cgPSAkKCB3aW5kb3cgKSxcclxuICAgICAgICAgICAgX3RpbWVyID0gc2V0VGltZW91dCggZnVuY3Rpb24oKXt9LCAxICk7XHJcblxyXG4gICAgICAgIC8vcHJpdmF0ZSBtZXRob2RzXHJcbiAgICAgICAgdmFyIF9jZW50ZXJXcmFwID0gZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgIGlmICggX3dpbmRvdy5oZWlnaHQoKSAtICggX3BvcHVwUGFkZGluZyAqIDIgKSAtIF93cmFwLmhlaWdodCgpID4gMCApIHtcclxuICAgICAgICAgICAgICAgICAgICBfd3JhcC5jc3MoIHsgdG9wOiAoICggX3dpbmRvdy5oZWlnaHQoKSAtICggX3BvcHVwUGFkZGluZyAqIDIgKSApIC0gX3dyYXAuaGVpZ2h0KCkgKSAvIDIgfSApO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBfd3JhcC5jc3MoIHsgdG9wOiAwIH0gKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgX2dldFNjcm9sbFdpZHRoID0gZnVuY3Rpb24gKCl7XHJcbiAgICAgICAgICAgICAgICB2YXIgc2Nyb2xsRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggJ2RpdicpLFxyXG4gICAgICAgICAgICAgICAgICAgIHNjcm9sbEJhcldpZHRoO1xyXG5cclxuICAgICAgICAgICAgICAgIHNjcm9sbERpdi5jbGFzc05hbWUgPSAncG9wdXBfX3Njcm9sbGJhci1tZWFzdXJlJztcclxuXHJcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKCBzY3JvbGxEaXYgKTtcclxuXHJcbiAgICAgICAgICAgICAgICBzY3JvbGxCYXJXaWR0aCA9IHNjcm9sbERpdi5vZmZzZXRXaWR0aCAtIHNjcm9sbERpdi5jbGllbnRXaWR0aDtcclxuXHJcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKHNjcm9sbERpdik7XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHNjcm9sbEJhcldpZHRoO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBfaGlkZSA9IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICBfb2JqLmNzcygge1xyXG4gICAgICAgICAgICAgICAgICAgIG92ZXJmbG93WTogJ2hpZGRlbidcclxuICAgICAgICAgICAgICAgIH0gKTtcclxuICAgICAgICAgICAgICAgIF9zY3JvbGxDb250ZWluZXIuY3NzKCB7XHJcbiAgICAgICAgICAgICAgICAgICAgb3ZlcmZsb3dZOiAnYXV0bycsXHJcbiAgICAgICAgICAgICAgICAgICAgcGFkZGluZ1JpZ2h0OiAwXHJcbiAgICAgICAgICAgICAgICB9ICk7XHJcblxyXG4gICAgICAgICAgICAgICAgX29iai5yZW1vdmVDbGFzcyggJ3BvcHVwX29wZW5lZCcgKTtcclxuICAgICAgICAgICAgICAgIF9vYmouYWRkQ2xhc3MoICdwb3B1cF9oaWRlJyApO1xyXG5cclxuICAgICAgICAgICAgICAgIF90aW1lciA9IHNldFRpbWVvdXQoIGZ1bmN0aW9uKCl7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIF9vYmouY3NzICh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG92ZXJmbG93WTogJ2F1dG8nXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIF9vYmoucmVtb3ZlQ2xhc3MoICdwb3B1cF9oaWRlJyApO1xyXG4gICAgICAgICAgICAgICAgfSwgMzAwICk7XHJcblxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBfaW5pdCA9IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICBfb2JqWyAwIF0ub2JqID0gX3NlbGY7XHJcbiAgICAgICAgICAgICAgICBfb25FdmVudHMoKTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgX29uRXZlbnRzID0gZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgIF93aW5kb3cub24oIHtcclxuICAgICAgICAgICAgICAgICAgICByZXNpemU6IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9jZW50ZXJXcmFwKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSApO1xyXG4gICAgICAgICAgICAgICAgX2J0blNob3cub24oIHtcclxuICAgICAgICAgICAgICAgICAgICBjbGljazogZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX3Nob3coICQoIHRoaXMgKS5hdHRyKCAnZGF0YS1wb3B1cCcgKSApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSApO1xyXG4gICAgICAgICAgICAgICAgX3dyYXAub24oIHtcclxuICAgICAgICAgICAgICAgICAgICBjbGljazogZnVuY3Rpb24oIGUgKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9ICk7XHJcbiAgICAgICAgICAgICAgICBfb2JqLm9uKCB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2xpY2s6IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9oaWRlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9ICk7XHJcbiAgICAgICAgICAgICAgICBfYnRuQ2xvc2Uub24oIHtcclxuICAgICAgICAgICAgICAgICAgICBjbGljazogZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2hpZGUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gKTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgX3Nob3cgPSBmdW5jdGlvbiggY2xhc3NOYW1lICl7XHJcbiAgICAgICAgICAgICAgICBfc2V0UG9wdXBDb250ZW50KCBjbGFzc05hbWUgKTtcclxuXHJcbiAgICAgICAgICAgICAgICBfc2Nyb2xsQ29udGVpbmVyLmNzcygge1xyXG4gICAgICAgICAgICAgICAgICAgIG92ZXJmbG93WTogJ2hpZGRlbicsXHJcbiAgICAgICAgICAgICAgICAgICAgcGFkZGluZ1JpZ2h0OiBfZ2V0U2Nyb2xsV2lkdGgoKVxyXG4gICAgICAgICAgICAgICAgfSApO1xyXG4gICAgICAgICAgICAgICAgX29iai5hZGRDbGFzcyggJ3BvcHVwX29wZW5lZCcgKTtcclxuICAgICAgICAgICAgICAgIF9jZW50ZXJXcmFwKCk7XHJcblxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBfc2V0UG9wdXBDb250ZW50ID0gZnVuY3Rpb24oIGNsYXNzTmFtZSApe1xyXG4gICAgICAgICAgICAgICAgdmFyIGN1ckNvbnRlbnQgPSBfY29udGVudHMuZmlsdGVyKCAnLnBvcHVwX18nICsgY2xhc3NOYW1lICk7XHJcblxyXG4gICAgICAgICAgICAgICAgX2NvbnRlbnRzLmNzcyggeyBkaXNwbGF5OiAnbm9uZScgfSApO1xyXG4gICAgICAgICAgICAgICAgY3VyQ29udGVudC5jc3MoIHsgZGlzcGxheTogJ2Jsb2NrJyB9ICk7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgIC8vcHVibGljIHByb3BlcnRpZXNcclxuXHJcbiAgICAgICAgLy9wdWJsaWMgbWV0aG9kc1xyXG5cclxuXHJcbiAgICAgICAgX2luaXQoKTtcclxuICAgIH07XHJcbn0gKSgpO1xyXG5cclxuIiwiKCBmdW5jdGlvbigpe1xyXG5cclxuICAgICQoIGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgJCggJ3NlbGVjdCcgKS5lYWNoKCBmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICBuZXcgV2Vic3RlcnNTZWxlY3QoIHtcclxuICAgICAgICAgICAgICAgIG9iajogJCggdGhpcyApLFxyXG4gICAgICAgICAgICAgICAgb3B0aW9uVHlwZTogMSxcclxuICAgICAgICAgICAgICAgIHNob3dUeXBlOiAyXHJcbiAgICAgICAgICAgIH0gKTtcclxuICAgICAgICB9ICk7XHJcbiAgICB9ICk7XHJcblxyXG4gICAgdmFyIFdlYnN0ZXJzU2VsZWN0ID0gZnVuY3Rpb24oIHBhcmFtcyApe1xyXG5cclxuICAgICAgICAvL3ByaXZhdGUgcHJvcGVydGllc1xyXG4gICAgICAgIHZhciBfc2VsZiA9IHRoaXMsXHJcbiAgICAgICAgICAgIF9vYmogPSBwYXJhbXMub2JqLFxyXG4gICAgICAgICAgICBfb3B0aW9uVHlwZSA9IHBhcmFtcy5vcHRpb25UeXBlIHx8IDAsXHJcbiAgICAgICAgICAgIF9zaG93VHlwZSA9IHBhcmFtcy5zaG93VHlwZSB8fCAwLFxyXG4gICAgICAgICAgICBfdmlzaWJsZSA9IHBhcmFtcy52aXNpYmxlIHx8IDUsXHJcbiAgICAgICAgICAgIF9kZXZpY2UgPSAvQW5kcm9pZHx3ZWJPU3xpUGhvbmV8aVBhZHxpUG9kfEJsYWNrQmVycnl8SUVNb2JpbGV8T3BlcmEgTWluaS9pLnRlc3QoIG5hdmlnYXRvci51c2VyQWdlbnQgKSxcclxuICAgICAgICAgICAgX3RleHQgPSAkKCAnPHNwYW4gY2xhc3M9XCJ3ZWJzdGVycy1zZWxlY3RfX2l0ZW1cIj48L3NwYW4+JyApLFxyXG4gICAgICAgICAgICBfd3JhcCA9ICQoICc8ZGl2IGNsYXNzPVwid2Vic3RlcnMtc2VsZWN0XCI+PC9kaXY+JyApLFxyXG4gICAgICAgICAgICBfd2luZG93ID0gJCggd2luZG93ICksXHJcbiAgICAgICAgICAgIF9ib2R5ID0gJCggJ2JvZHknICksXHJcbiAgICAgICAgICAgIF9vcGVuZWQgPSBmYWxzZSxcclxuICAgICAgICAgICAgX3BvcHVwLCBfc2Nyb2xsO1xyXG5cclxuICAgICAgICAvL3ByaXZhdGUgbWV0aG9kc1xyXG4gICAgICAgIHZhciBfYWRkV3JhcCA9IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICB2YXIgY3VyVGV4dCA9ICcnO1xyXG5cclxuICAgICAgICAgICAgICAgIF9vYmouY3NzKCB7XHJcbiAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMFxyXG4gICAgICAgICAgICAgICAgfSApO1xyXG5cclxuICAgICAgICAgICAgICAgIF9vYmoud3JhcCggX3dyYXAgKTtcclxuICAgICAgICAgICAgICAgIF93cmFwID0gX29iai5wYXJlbnQoKTtcclxuICAgICAgICAgICAgICAgIF93cmFwLmFwcGVuZCggJzxkaXYgY2xhc3M9XCJ3ZWJzdGVycy1zZWxlY3RfX2Fycm93XCI+PC9kaXY+JyApO1xyXG4gICAgICAgICAgICAgICAgX29iai5iZWZvcmUoIF90ZXh0ICk7XHJcbiAgICAgICAgICAgICAgICBfb2JqLmZpbmQoICdvcHRpb24nICkuZWFjaCggZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgY3VySXRlbSA9ICQoIHRoaXMgKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYoIGN1ckl0ZW0uYXR0ciggJ3NlbGVjdGVkJyApID09ICdzZWxlY3RlZCcgKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY3VyVGV4dCA9IGN1ckl0ZW0udGV4dCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiggY3VyVGV4dCA9PSAnJyApe1xyXG4gICAgICAgICAgICAgICAgICAgIGN1clRleHQgPSAgX29iai5maW5kKCAnb3B0aW9uJykuZXEoIDAgKS50ZXh0KCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBfdGV4dC50ZXh0KCBjdXJUZXh0ICk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIF9oaWRlUG9wdXAgPSBmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgICAgX29wZW5lZCA9IGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmKCAhX3Nob3dUeXBlICl7XHJcbiAgICAgICAgICAgICAgICAgICAgX3BvcHVwLmNzcygge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkaXNwbGF5OiAnbm9uZSdcclxuICAgICAgICAgICAgICAgICAgICB9ICk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYoIF9zaG93VHlwZSA9PSAxICl7XHJcbiAgICAgICAgICAgICAgICAgICAgX3BvcHVwLnN0b3AoIHRydWUsIGZhbHNlICkuc2xpZGVVcCggMzAwLCBmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfcG9wdXAucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSApO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmKCBfc2hvd1R5cGUgPT0gMiApIHtcclxuICAgICAgICAgICAgICAgICAgICBfcG9wdXAuc3RvcCggdHJ1ZSwgZmFsc2UgKS5mYWRlT3V0KCAzMDAsIGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9wb3B1cC5yZW1vdmUoKTtcclxuICAgICAgICAgICAgICAgICAgICB9ICk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgX3dyYXAucmVtb3ZlQ2xhc3MoICd3ZWJzdGVycy1zZWxlY3Rfb3BlbmVkJyApO1xyXG5cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgX2NvbnN0cnVjdG9yID0gZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgIF9vYmpbIDAgXS5vYmogPSBfc2VsZjtcclxuXHJcbiAgICAgICAgICAgICAgICBfYWRkV3JhcCgpO1xyXG4gICAgICAgICAgICAgICAgX3NlbGVjdFZpZXdUeXBlKCk7XHJcbiAgICAgICAgICAgICAgICBfb25FdmVudHMoKTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgX29uRXZlbnRzID0gZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgIF9vYmoub24oICdjaGFuZ2UnLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICBfdGV4dC50ZXh0KCAkKCB0aGlzICkuZmluZCggJ29wdGlvbjpzZWxlY3RlZCcgKS50ZXh0KCkgKTtcclxuICAgICAgICAgICAgICAgIH0gKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiggX29wdGlvblR5cGUgPT0gMSAmJiAhX2RldmljZSApe1xyXG4gICAgICAgICAgICAgICAgICAgIF93cmFwLm9uKCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICdjbGljayc6IGZ1bmN0aW9uKCBlICl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCBfb3BlbmVkICl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2hpZGVQb3B1cCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfc2hvd1BvcHVwKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSApO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBfd2luZG93Lm9uKCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICdjbGljayc6IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiggX29wZW5lZCApe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9oaWRlUG9wdXAoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0gKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgX3NlbGVjdFZpZXdUeXBlID0gZnVuY3Rpb24oKXtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiggIV9vcHRpb25UeXBlIHx8IF9kZXZpY2UgKXtcclxuICAgICAgICAgICAgICAgICAgICBfc2V0TW9iaWxlVmlldygpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmKCBfb3B0aW9uVHlwZSA9PSAxICl7XHJcbiAgICAgICAgICAgICAgICAgICAgX3NldEN1c3RvbTEoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgX3NldEN1c3RvbTEgPSBmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgICAgX3dyYXAuYWRkQ2xhc3MoICd3ZWJzdGVycy1zZWxlY3RfY3VzdG9tJyApO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBfc2V0TW9iaWxlVmlldyA9IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICBfd3JhcC5hZGRDbGFzcyggJ3dlYnN0ZXJzLXNlbGVjdF9tb2JpbGUnICk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIF9zaG93UG9wdXAgPSBmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgICAgdmFyIHNlbGVjdHMgPSAkKCAnc2VsZWN0JyApLFxyXG4gICAgICAgICAgICAgICAgICAgIGxpc3QgPSAkKCAnPHVsPjwvdWw+JyksXHJcbiAgICAgICAgICAgICAgICAgICAgY3VyU2Nyb2xsID0gX3dpbmRvdy5zY3JvbGxUb3AoKSxcclxuICAgICAgICAgICAgICAgICAgICBvZmZzZXQgPSBfd3JhcC5vZmZzZXQoKSxcclxuICAgICAgICAgICAgICAgICAgICBtYXhIZWlnaHQgPSAwLFxyXG4gICAgICAgICAgICAgICAgICAgIGN1ckluZGV4ID0gX29iai5maW5kKCAnb3B0aW9uOnNlbGVjdGVkJyApLmluZGV4KCksXHJcbiAgICAgICAgICAgICAgICAgICAgaWQgPSBNYXRoLnJvdW5kKCBNYXRoLnJhbmRvbSgpICogMTAwMCApO1xyXG5cclxuICAgICAgICAgICAgICAgIHNlbGVjdHMuZWFjaCggZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgICAgICBpZiggdGhpcyAhPT0gX29ialsgMCBdICYmIHRoaXMub2JqLmNoZWNrT3BlbmVkKCkgKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5vYmouY2xvc2UoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9ICk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYoIF9vcGVuZWQgKXtcclxuICAgICAgICAgICAgICAgICAgICBfcG9wdXAucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBfb3BlbmVkID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgICAgICBfcG9wdXAgPSAkKCAnPGRpdiBjbGFzcz1cIndlYnN0ZXJzLXNlbGVjdF9fcG9wdXBcIiBpZD1cIndlYnN0ZXJzLXNlbGVjdF9fcG9wdXAnICsgaWQgKyAnXCI+PC9kaXY+JyApO1xyXG5cclxuICAgICAgICAgICAgICAgIF9vYmouZmluZCggJ29wdGlvbicgKS5lYWNoKCBmdW5jdGlvbiggaSApe1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBjdXJJdGVtID0gJCggdGhpcyApO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiggaSA9PSBjdXJJbmRleCApe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsaXN0LmFwcGVuZCggJzxsaSBjbGFzcz1cImFjdGl2ZVwiPicgKyBjdXJJdGVtLnRleHQoKSArICc8L2xpPicgKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsaXN0LmFwcGVuZCggJzxsaT4nICsgY3VySXRlbS50ZXh0KCkgKyAnPC9saT4nICk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIH0gKTtcclxuXHJcbiAgICAgICAgICAgICAgICBfcG9wdXAuYXBwZW5kKCBsaXN0ICk7XHJcbiAgICAgICAgICAgICAgICBfYm9keS5hcHBlbmQoIF9wb3B1cCApO1xyXG4gICAgICAgICAgICAgICAgX3dyYXAuYWRkQ2xhc3MoICd3ZWJzdGVycy1zZWxlY3Rfb3BlbmVkJyApO1xyXG5cclxuICAgICAgICAgICAgICAgIF9wb3B1cC5jc3MoIHtcclxuICAgICAgICAgICAgICAgICAgICB3aWR0aDogX3dyYXAub3V0ZXJXaWR0aCgpLFxyXG4gICAgICAgICAgICAgICAgICAgIGxlZnQ6IG9mZnNldC5sZWZ0LFxyXG4gICAgICAgICAgICAgICAgICAgIHRvcDogb2Zmc2V0LnRvcCArIF93cmFwLm91dGVySGVpZ2h0KClcclxuICAgICAgICAgICAgICAgIH0gKTtcclxuXHJcbiAgICAgICAgICAgICAgICBtYXhIZWlnaHQgPSBfcG9wdXAub3V0ZXJIZWlnaHQoKTtcclxuICAgICAgICAgICAgICAgIGlmKCBtYXhIZWlnaHQgPiBfcG9wdXAuZmluZCggJ2xpJyApLmVxKCAwICkub3V0ZXJIZWlnaHQoKSAqIF92aXNpYmxlICl7XHJcbiAgICAgICAgICAgICAgICAgICAgX3BvcHVwLmhlaWdodCggX3BvcHVwLmZpbmQoICdsaScgKS5lcSggMCApLm91dGVySGVpZ2h0KCkgKiBfdmlzaWJsZSApO1xyXG4gICAgICAgICAgICAgICAgICAgIF9zY3JvbGwgPSBfcG9wdXAubmljZVNjcm9sbCgge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBob3JpenJhaWxlbmFibGVkOiBmYWxzZVxyXG4gICAgICAgICAgICAgICAgICAgIH0gKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiggX3Nob3dUeXBlID09IDEgKXtcclxuICAgICAgICAgICAgICAgICAgICBfcG9wdXAuY3NzKCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6ICdub25lJ1xyXG4gICAgICAgICAgICAgICAgICAgIH0gKTtcclxuICAgICAgICAgICAgICAgICAgICBfcG9wdXAuc2xpZGVEb3duKCAzMDAgKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiggX3Nob3dUeXBlID09IDIgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgX3BvcHVwLmNzcygge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAwLjFcclxuICAgICAgICAgICAgICAgICAgICB9ICk7XHJcbiAgICAgICAgICAgICAgICAgICAgX3BvcHVwLmFuaW1hdGUoIHsgb3BhY2l0eTogMSB9LCAzMDApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIF9wb3B1cC5maW5kKCAnbGknICkub24oIHtcclxuICAgICAgICAgICAgICAgICAgICAnY2xpY2snOiBmdW5jdGlvbiggZSApe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgaW5kZXggPSAkKCB0aGlzICkuaW5kZXgoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfb2JqLnZhbCggX29iai5maW5kKCAnb3B0aW9uJyApLmVxKCBpbmRleCApLmF0dHIoICd2YWx1ZScgKSApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfb2JqLnRyaWdnZXIoICdjaGFuZ2UnICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9oaWRlUG9wdXAoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9ICk7XHJcblxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAvL3B1YmxpYyBwcm9wZXJ0aWVzXHJcblxyXG4gICAgICAgIC8vcHVibGljIG1ldGhvZHNcclxuICAgICAgICBfc2VsZi5jaGVja09wZW5lZCA9IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgIHJldHVybiBfb3BlbmVkO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgX3NlbGYuY2xvc2UgPSBmdW5jdGlvbigpe1xyXG4gICAgICAgICAgX2hpZGVQb3B1cCgpO1xyXG4gICAgICAgIH07XHJcblxyXG5cclxuICAgICAgICBfY29uc3RydWN0b3IoKTtcclxuXHJcbiAgICB9O1xyXG5cclxufSApKCk7Il0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
