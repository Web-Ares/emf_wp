!function(){$(function(){$(".popup").each(function(){new Popup($(this))})})}();var Popup=function(n){var o=this,p=$(".popup__open"),i=n,t=i.find(".popup__close, .popup__cancel"),e=i.find(".popup__wrap"),s=i.find(".popup__content"),c=$("html, body"),d=$(".site__content"),u=$(window),a=!0,f=setTimeout(function(){},1),l=function(){d.css({"z-index":4})},_=function(){d.css({"z-index":2})},r=function(){i.css({overflowY:"hidden"}),i.removeClass("popup_opened"),i.addClass("popup_hide"),f=setTimeout(function(){i.css({overflowY:"auto"}),i.removeClass("popup_hide")},300),u.width()<1024&&(c.css({overflowY:"auto",paddingRight:0}),_()),s.css({display:"none"}),i.find(".popup__addresses").length&&(i.find(".popup__addresses").children().css({display:"none"}),i.find(".popup__addresses").children().html(""),p.removeClass("ajax-block__btn_loaded"))},h=function(){i[0].obj=o,w()},w=function(){u.on({load:function(){a=u.width()>=1024},resize:function(){u.width()>=1024?a=!1:(a||r(),a=!0)}}),p.on({click:function(){return v($(this).attr("data-popup")),!1}}),e.on({click:function(n){n.stopPropagation()}}),i.on({click:function(){return r(),!1}}),t.on({click:function(){return r(),!1}})},v=function(n){m(n),i.addClass("popup_opened"),u.width()<1024&&(c.css({overflowY:"hidden"}),l())},m=function(n){var o=s.filter(".popup__"+n);o.css({display:"block"})};h()};
!function(){$(function(){$("select").each(function(){new e({obj:$(this),optionType:1,showType:2})})});var e=function(e){var t,n,i=this,o=e.obj,s=e.optionType||0,c=e.showType||0,a=e.visible||5,l=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),d=$('<span class="websters-select__item"></span>'),p=$('<div class="websters-select"></div>'),r=$(window),f=$("body"),u=!1,h=function(){var e="";o.css({opacity:0}),o.wrap(p),p=o.parent(),p.append('<div class="websters-select__arrow"></div>'),o.before(d),o.find("option").each(function(){var t=$(this);"selected"==t.attr("selected")&&(e=t.text())}),""==e&&(e=o.find("option").eq(0).text()),d.text(e)},v=function(){u=!1,c?1==c?t.stop(!0,!1).slideUp(300,function(){t.remove()}):2==c&&t.stop(!0,!1).fadeOut(300,function(){t.remove()}):t.css({display:"none"}),p.removeClass("websters-select_opened")},b=function(){o[0].obj=i,h(),g(),w()},w=function(){o.on("change",function(){d.text($(this).find("option:selected").text())}),1!=s||l||(p.on({click:function(e){e.stopPropagation(),u?v():m()}}),r.on({click:function(){u&&v()}})),$(".nice-scroll").on({scroll:function(){u&&v()}})},g=function(){!s||l?y():1==s&&_()},_=function(){p.addClass("websters-select_custom")},y=function(){p.addClass("websters-select_mobile")},m=function(){var e=$("select"),i=$("<ul></ul>"),s=(r.scrollTop(),p.offset()),l=0,d=o.find("option:selected").index(),h=Math.round(1e3*Math.random());e.each(function(){this!==o[0]&&this.obj.checkOpened()&&this.obj.close()}),u&&t.remove(),u=!0,t=$('<div class="websters-select__popup" id="websters-select__popup'+h+'"></div>'),o.find("option").each(function(e){var t=$(this);e==d?i.append('<li class="active">'+t.text()+"</li>"):i.append("<li>"+t.text()+"</li>")}),t.append(i),f.append(t),p.addClass("websters-select_opened"),t.css({width:p.outerWidth(),left:s.left,top:s.top+p.outerHeight()}),l=t.outerHeight(),l>t.find("li").eq(0).outerHeight()*a&&(t.height(t.find("li").eq(0).outerHeight()*a),n=t.niceScroll({horizrailenabled:!1})),1==c?(t.css({display:"none"}),t.slideDown(300)):2==c&&(t.css({opacity:.1}),t.animate({opacity:1},300)),t.find("li").on({click:function(e){var t=$(this).index();e.stopPropagation(),o.val(o.find("option").eq(t).attr("value")),o.trigger("change"),v()}})};i.checkOpened=function(){return u},i.close=function(){v()},b()}}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImpxdWVyeS5wb3B1cC5qcyIsImpxdWVyeS53ZWJzdGVycy1zZWxlY3QuanMiXSwibmFtZXMiOlsiJCIsImVhY2giLCJQb3B1cCIsInRoaXMiLCJvYmoiLCJfc2VsZiIsIl9idG5TaG93IiwiX29iaiIsIl9idG5DbG9zZSIsImZpbmQiLCJfd3JhcCIsIl9jb250ZW50cyIsIl9kb20iLCJfY29udGVudCIsIl93aW5kb3ciLCJ3aW5kb3ciLCJfbW9iaWxlU2NyZWVuIiwiX3RpbWVyIiwic2V0VGltZW91dCIsIl9jaGFuZ2VDb250ZW50WmluZGV4IiwiY3NzIiwiei1pbmRleCIsIl9yZXNldENvbnRlbnRaaW5kZXgiLCJfaGlkZSIsIm92ZXJmbG93WSIsInJlbW92ZUNsYXNzIiwiYWRkQ2xhc3MiLCJ3aWR0aCIsInBhZGRpbmdSaWdodCIsImRpc3BsYXkiLCJsZW5ndGgiLCJjaGlsZHJlbiIsImh0bWwiLCJfaW5pdCIsIl9vbkV2ZW50cyIsIm9uIiwibG9hZCIsInJlc2l6ZSIsImNsaWNrIiwiX3Nob3ciLCJhdHRyIiwiZSIsInN0b3BQcm9wYWdhdGlvbiIsImNsYXNzTmFtZSIsIl9zZXRQb3B1cENvbnRlbnQiLCJjdXJDb250ZW50IiwiZmlsdGVyIiwiV2Vic3RlcnNTZWxlY3QiLCJvcHRpb25UeXBlIiwic2hvd1R5cGUiLCJwYXJhbXMiLCJfcG9wdXAiLCJfc2Nyb2xsIiwiX29wdGlvblR5cGUiLCJfc2hvd1R5cGUiLCJfdmlzaWJsZSIsInZpc2libGUiLCJfZGV2aWNlIiwidGVzdCIsIm5hdmlnYXRvciIsInVzZXJBZ2VudCIsIl90ZXh0IiwiX2JvZHkiLCJfb3BlbmVkIiwiX2FkZFdyYXAiLCJjdXJUZXh0Iiwib3BhY2l0eSIsIndyYXAiLCJwYXJlbnQiLCJhcHBlbmQiLCJiZWZvcmUiLCJjdXJJdGVtIiwidGV4dCIsImVxIiwiX2hpZGVQb3B1cCIsInN0b3AiLCJzbGlkZVVwIiwicmVtb3ZlIiwiZmFkZU91dCIsIl9jb25zdHJ1Y3RvciIsIl9zZWxlY3RWaWV3VHlwZSIsIl9zaG93UG9wdXAiLCJzY3JvbGwiLCJfc2V0TW9iaWxlVmlldyIsIl9zZXRDdXN0b20xIiwic2VsZWN0cyIsImxpc3QiLCJvZmZzZXQiLCJzY3JvbGxUb3AiLCJtYXhIZWlnaHQiLCJjdXJJbmRleCIsImluZGV4IiwiaWQiLCJNYXRoIiwicm91bmQiLCJyYW5kb20iLCJjaGVja09wZW5lZCIsImNsb3NlIiwiaSIsIm91dGVyV2lkdGgiLCJsZWZ0IiwidG9wIiwib3V0ZXJIZWlnaHQiLCJoZWlnaHQiLCJuaWNlU2Nyb2xsIiwiaG9yaXpyYWlsZW5hYmxlZCIsInNsaWRlRG93biIsImFuaW1hdGUiLCJ2YWwiLCJ0cmlnZ2VyIl0sIm1hcHBpbmdzIjoiQ0FBQSxXQUVJQSxFQUFHLFdBRUNBLEVBQUcsVUFBV0MsS0FBTSxXQUVoQixHQUFJQyxPQUFPRixFQUFFRyxhQVV6QixJQUFJRCxPQUFRLFNBQVVFLEdBR2xCLEdBQUlDLEdBQVFGLEtBRVJHLEVBQVlOLEVBQUcsZ0JBQ2ZPLEVBQU9ILEVBQ1BJLEVBQVlELEVBQUtFLEtBQU0saUNBQ3ZCQyxFQUFRSCxFQUFLRSxLQUFNLGdCQUNuQkUsRUFBWUosRUFBS0UsS0FBTSxtQkFDdkJHLEVBQU9aLEVBQUcsY0FDVmEsRUFBV2IsRUFBRyxrQkFDZGMsRUFBVWQsRUFBR2UsUUFDYkMsR0FBZ0IsRUFDaEJDLEVBQVNDLFdBQVksYUFBYyxHQVVuQ0MsRUFBdUIsV0FDbkJOLEVBQVNPLEtBQ0xDLFVBQVcsS0FHbkJDLEVBQXNCLFdBQ2xCVCxFQUFTTyxLQUNMQyxVQUFXLEtBaUJuQkUsRUFBUSxXQUNKaEIsRUFBS2EsS0FDREksVUFBVyxXQUdmakIsRUFBS2tCLFlBQWEsZ0JBQ2xCbEIsRUFBS21CLFNBQVUsY0FFZlQsRUFBU0MsV0FBWSxXQUVqQlgsRUFBS2EsS0FDREksVUFBVyxTQUdmakIsRUFBS2tCLFlBQWEsZUFFbkIsS0FFQ1gsRUFBUWEsUUFBVSxPQUVsQmYsRUFBS1EsS0FDREksVUFBVyxPQUNYSSxhQUFjLElBR2xCTixLQUdKWCxFQUFV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RUFBTzFDLEtBQU0sTUFBT2dFLEdBQUksR0FBSTZCLGNBQWdCL0MsR0FDM0RILEVBQVVELEVBQU9xRCxZQUNiQyxrQkFBa0IsS0FJVCxHQUFibkQsR0FDQUgsRUFBTy9CLEtBQ0hTLFFBQVMsU0FFYnNCLEVBQU91RCxVQUFXLE1BQ0UsR0FBYnBELElBQ1BILEVBQU8vQixLQUNIOEMsUUFBUyxLQUViZixFQUFPd0QsU0FBV3pDLFFBQVMsR0FBSyxNQUdwQ2YsRUFBTzFDLEtBQU0sTUFBTzBCLElBQ2hCRyxNQUFTLFNBQVVHLEdBQ2YsR0FBSWtELEdBQVEzRixFQUFHRyxNQUFPd0YsT0FFdEJsRCxHQUFFQyxrQkFFRm5DLEVBQUtxRyxJQUFLckcsRUFBS0UsS0FBTSxVQUFXZ0UsR0FBSWtCLEdBQVFuRCxLQUFNLFVBQ2xEakMsRUFBS3NHLFFBQVMsVUFDZG5DLE9BU2hCckUsR0FBTTJGLFlBQWMsV0FDaEIsTUFBT2pDLElBRVgxRCxFQUFNNEYsTUFBUSxXQUNadkIsS0FJRksiLCJmaWxlIjoidWkubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiKCBmdW5jdGlvbigpe1xuXG4gICAgJCggZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgJCggJy5wb3B1cCcgKS5lYWNoKCBmdW5jdGlvbigpe1xuXG4gICAgICAgICAgICBuZXcgUG9wdXAoICQodGhpcykgKTtcblxuICAgICAgICB9ICk7XG5cbiAgICB9ICk7XG5cblxuXG59ICkoKTtcblxudmFyIFBvcHVwID0gZnVuY3Rpb24oIG9iaiApe1xuXG4gICAgLy9wcml2YXRlIHByb3BlcnRpZXNcbiAgICB2YXIgX3NlbGYgPSB0aGlzLFxuICAgICAgICBfcG9wdXBQYWRkaW5nID0gNDAsXG4gICAgICAgIF9idG5TaG93ID0gICQoICcucG9wdXBfX29wZW4nICksXG4gICAgICAgIF9vYmogPSBvYmosXG4gICAgICAgIF9idG5DbG9zZSA9IF9vYmouZmluZCggJy5wb3B1cF9fY2xvc2UsIC5wb3B1cF9fY2FuY2VsJyApLFxuICAgICAgICBfd3JhcCA9IF9vYmouZmluZCggJy5wb3B1cF9fd3JhcCcgKSxcbiAgICAgICAgX2NvbnRlbnRzID0gX29iai5maW5kKCAnLnBvcHVwX19jb250ZW50JyApLFxuICAgICAgICBfZG9tID0gJCggJ2h0bWwsIGJvZHknICksXG4gICAgICAgIF9jb250ZW50ID0gJCggJy5zaXRlX19jb250ZW50JyApLFxuICAgICAgICBfd2luZG93ID0gJCggd2luZG93ICksXG4gICAgICAgIF9tb2JpbGVTY3JlZW4gPSB0cnVlLFxuICAgICAgICBfdGltZXIgPSBzZXRUaW1lb3V0KCBmdW5jdGlvbigpe30sIDEgKTtcblxuICAgIC8vcHJpdmF0ZSBtZXRob2RzXG4gICAgdmFyIF9jZW50ZXJXcmFwID0gZnVuY3Rpb24oKXtcbiAgICAgICAgICAgIGlmICggX3dpbmRvdy5oZWlnaHQoKSAtICggX3BvcHVwUGFkZGluZyAqIDIgKSAtIF93cmFwLmhlaWdodCgpID4gMCApIHtcbiAgICAgICAgICAgICAgICBfd3JhcC5jc3MoIHsgdG9wOiAoICggX3dpbmRvdy5oZWlnaHQoKSAtICggX3BvcHVwUGFkZGluZyAqIDIgKSApIC0gX3dyYXAuaGVpZ2h0KCkgKSAvIDIgfSApO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBfd3JhcC5jc3MoIHsgdG9wOiAwIH0gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgX2NoYW5nZUNvbnRlbnRaaW5kZXggPSBmdW5jdGlvbiAoKXtcbiAgICAgICAgICAgIF9jb250ZW50LmNzcygge1xuICAgICAgICAgICAgICAgICd6LWluZGV4JzogNFxuICAgICAgICAgICAgfSApO1xuICAgICAgICB9LFxuICAgICAgICBfcmVzZXRDb250ZW50WmluZGV4ID0gZnVuY3Rpb24gKCl7XG4gICAgICAgICAgICBfY29udGVudC5jc3MoIHtcbiAgICAgICAgICAgICAgICAnei1pbmRleCc6IDJcbiAgICAgICAgICAgIH0gKTtcbiAgICAgICAgfSxcbiAgICAgICAgX2dldFNjcm9sbFdpZHRoID0gZnVuY3Rpb24gKCl7XG4gICAgICAgICAgICB2YXIgc2Nyb2xsRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggJ2RpdicpLFxuICAgICAgICAgICAgICAgIHNjcm9sbEJhcldpZHRoO1xuXG4gICAgICAgICAgICBzY3JvbGxEaXYuY2xhc3NOYW1lID0gJ3BvcHVwX19zY3JvbGxiYXItbWVhc3VyZSc7XG5cbiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoIHNjcm9sbERpdiApO1xuXG4gICAgICAgICAgICBzY3JvbGxCYXJXaWR0aCA9IHNjcm9sbERpdi5vZmZzZXRXaWR0aCAtIHNjcm9sbERpdi5jbGllbnRXaWR0aDtcblxuICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChzY3JvbGxEaXYpO1xuXG4gICAgICAgICAgICByZXR1cm4gc2Nyb2xsQmFyV2lkdGg7XG4gICAgICAgIH0sXG4gICAgICAgIF9oaWRlID0gZnVuY3Rpb24oKXtcbiAgICAgICAgICAgIF9vYmouY3NzKCB7XG4gICAgICAgICAgICAgICAgb3ZlcmZsb3dZOiAnaGlkZGVuJ1xuICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICBfb2JqLnJlbW92ZUNsYXNzKCAncG9wdXBfb3BlbmVkJyApO1xuICAgICAgICAgICAgX29iai5hZGRDbGFzcyggJ3BvcHVwX2hpZGUnICk7XG5cbiAgICAgICAgICAgIF90aW1lciA9IHNldFRpbWVvdXQoIGZ1bmN0aW9uKCl7XG5cbiAgICAgICAgICAgICAgICBfb2JqLmNzcyAoe1xuICAgICAgICAgICAgICAgICAgICBvdmVyZmxvd1k6ICdhdXRvJ1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgX29iai5yZW1vdmVDbGFzcyggJ3BvcHVwX2hpZGUnICk7XG5cbiAgICAgICAgICAgIH0sIDMwMCApO1xuXG4gICAgICAgICAgICBpZiggX3dpbmRvdy53aWR0aCgpIDwgMTAyNCApIHtcblxuICAgICAgICAgICAgICAgIF9kb20uY3NzKCB7XG4gICAgICAgICAgICAgICAgICAgIG92ZXJmbG93WTogJ2F1dG8nLFxuICAgICAgICAgICAgICAgICAgICBwYWRkaW5nUmlnaHQ6IDBcbiAgICAgICAgICAgICAgICB9ICk7XG5cbiAgICAgICAgICAgICAgICBfcmVzZXRDb250ZW50WmluZGV4KCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIF9jb250ZW50cy5jc3MoIHsgZGlzcGxheTogJ25vbmUnIH0gKTtcblxuICAgICAgICAgICAgaWYoIF9vYmouZmluZCgnLnBvcHVwX19hZGRyZXNzZXMnKS5sZW5ndGggKSB7XG5cbiAgICAgICAgICAgICAgICBfb2JqLmZpbmQoJy5wb3B1cF9fYWRkcmVzc2VzJykuY2hpbGRyZW4oKS5jc3MoIHsgZGlzcGxheTogJ25vbmUnIH0gKTtcbiAgICAgICAgICAgICAgICBfb2JqLmZpbmQoJy5wb3B1cF9fYWRkcmVzc2VzJykuY2hpbGRyZW4oKS5odG1sKCcnKTtcbiAgICAgICAgICAgICAgICBfYnRuU2hvdy5yZW1vdmVDbGFzcygnYWpheC1ibG9ja19fYnRuX2xvYWRlZCcpO1xuXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgfSxcbiAgICAgICAgX2luaXQgPSBmdW5jdGlvbigpe1xuICAgICAgICAgICAgX29ialsgMCBdLm9iaiA9IF9zZWxmO1xuICAgICAgICAgICAgX29uRXZlbnRzKCk7XG4gICAgICAgIH0sXG4gICAgICAgIF9vbkV2ZW50cyA9IGZ1bmN0aW9uKCl7XG5cbiAgICAgICAgICAgIF93aW5kb3cub24oIHtcblxuICAgICAgICAgICAgICAgIGxvYWQ6IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgICAgICAgICBfbW9iaWxlU2NyZWVuID0gX3dpbmRvdy53aWR0aCgpID49IDEwMjQ7XG5cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHJlc2l6ZTogZnVuY3Rpb24oKSB7XG5cblxuICAgICAgICAgICAgICAgICAgICBpZiggX3dpbmRvdy53aWR0aCgpID49IDEwMjQpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgX21vYmlsZVNjcmVlbiA9IGZhbHNlO1xuXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCAhX21vYmlsZVNjcmVlbiApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9oaWRlKCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgX21vYmlsZVNjcmVlbiA9IHRydWVcblxuICAgICAgICAgICAgICAgICAgICB9XG5cblxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICBfYnRuU2hvdy5vbigge1xuICAgICAgICAgICAgICAgIGNsaWNrOiBmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgICAgICBfc2hvdyggJCggdGhpcyApLmF0dHIoICdkYXRhLXBvcHVwJyApICk7XG5cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gKTtcblxuICAgICAgICAgICAgX3dyYXAub24oIHtcbiAgICAgICAgICAgICAgICBjbGljazogZnVuY3Rpb24oIGUgKXtcbiAgICAgICAgICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9ICk7XG4gICAgICAgICAgICBfb2JqLm9uKCB7XG4gICAgICAgICAgICAgICAgY2xpY2s6IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgICAgIF9oaWRlKCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9ICk7XG4gICAgICAgICAgICBfYnRuQ2xvc2Uub24oIHtcbiAgICAgICAgICAgICAgICBjbGljazogZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICAgICAgX2hpZGUoKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gKTtcbiAgICAgICAgfSxcbiAgICAgICAgX3Nob3cgPSBmdW5jdGlvbiggY2xhc3NOYW1lICl7XG4gICAgICAgICAgICBfc2V0UG9wdXBDb250ZW50KCBjbGFzc05hbWUgKTtcblxuICAgICAgICAgICAgX29iai5hZGRDbGFzcyggJ3BvcHVwX29wZW5lZCcgKTtcblxuICAgICAgICAgICAgaWYoIF93aW5kb3cud2lkdGgoKSA8IDEwMjQgKSB7XG5cbiAgICAgICAgICAgICAgICBfZG9tLmNzcygge1xuICAgICAgICAgICAgICAgICAgICBvdmVyZmxvd1k6ICdoaWRkZW4nXG4gICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICAgICAgX2NoYW5nZUNvbnRlbnRaaW5kZXgoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICB9LFxuICAgICAgICBfc2V0UG9wdXBDb250ZW50ID0gZnVuY3Rpb24oIGNsYXNzTmFtZSApe1xuICAgICAgICAgICAgdmFyIGN1ckNvbnRlbnQgPSBfY29udGVudHMuZmlsdGVyKCAnLnBvcHVwX18nICsgY2xhc3NOYW1lICk7XG5cbiAgICAgICAgICAgIC8vX2NvbnRlbnRzLmNzcyggeyBkaXNwbGF5OiAnbm9uZScgfSApO1xuICAgICAgICAgICAgY3VyQ29udGVudC5jc3MoIHsgZGlzcGxheTogJ2Jsb2NrJyB9ICk7XG5cbiAgICAgICAgfTtcblxuICAgIC8vcHVibGljIHByb3BlcnRpZXNcblxuICAgIC8vcHVibGljIG1ldGhvZHNcblxuICAgIF9pbml0KCk7XG59OyIsIiggZnVuY3Rpb24oKXtcblxuICAgICQoIGZ1bmN0aW9uKCl7XG4gICAgICAgICQoICdzZWxlY3QnICkuZWFjaCggZnVuY3Rpb24oKXtcbiAgICAgICAgICAgIG5ldyBXZWJzdGVyc1NlbGVjdCgge1xuICAgICAgICAgICAgICAgIG9iajogJCggdGhpcyApLFxuICAgICAgICAgICAgICAgIG9wdGlvblR5cGU6IDEsXG4gICAgICAgICAgICAgICAgc2hvd1R5cGU6IDJcbiAgICAgICAgICAgIH0gKTtcbiAgICAgICAgfSApO1xuICAgIH0gKTtcblxuICAgIHZhciBXZWJzdGVyc1NlbGVjdCA9IGZ1bmN0aW9uKCBwYXJhbXMgKXtcblxuICAgICAgICAvL3ByaXZhdGUgcHJvcGVydGllc1xuICAgICAgICB2YXIgX3NlbGYgPSB0aGlzLFxuICAgICAgICAgICAgX29iaiA9IHBhcmFtcy5vYmosXG4gICAgICAgICAgICBfb3B0aW9uVHlwZSA9IHBhcmFtcy5vcHRpb25UeXBlIHx8IDAsXG4gICAgICAgICAgICBfc2hvd1R5cGUgPSBwYXJhbXMuc2hvd1R5cGUgfHwgMCxcbiAgICAgICAgICAgIF92aXNpYmxlID0gcGFyYW1zLnZpc2libGUgfHwgNSxcbiAgICAgICAgICAgIF9kZXZpY2UgPSAvQW5kcm9pZHx3ZWJPU3xpUGhvbmV8aVBhZHxpUG9kfEJsYWNrQmVycnl8SUVNb2JpbGV8T3BlcmEgTWluaS9pLnRlc3QoIG5hdmlnYXRvci51c2VyQWdlbnQgKSxcbiAgICAgICAgICAgIF90ZXh0ID0gJCggJzxzcGFuIGNsYXNzPVwid2Vic3RlcnMtc2VsZWN0X19pdGVtXCI+PC9zcGFuPicgKSxcbiAgICAgICAgICAgIF93cmFwID0gJCggJzxkaXYgY2xhc3M9XCJ3ZWJzdGVycy1zZWxlY3RcIj48L2Rpdj4nICksXG4gICAgICAgICAgICBfd2luZG93ID0gJCggd2luZG93ICksXG4gICAgICAgICAgICBfYm9keSA9ICQoICdib2R5JyApLFxuICAgICAgICAgICAgX29wZW5lZCA9IGZhbHNlLFxuICAgICAgICAgICAgX3BvcHVwLCBfc2Nyb2xsO1xuXG4gICAgICAgIC8vcHJpdmF0ZSBtZXRob2RzXG4gICAgICAgIHZhciBfYWRkV3JhcCA9IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgdmFyIGN1clRleHQgPSAnJztcblxuICAgICAgICAgICAgICAgIF9vYmouY3NzKCB7XG4gICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDBcbiAgICAgICAgICAgICAgICB9ICk7XG5cbiAgICAgICAgICAgICAgICBfb2JqLndyYXAoIF93cmFwICk7XG4gICAgICAgICAgICAgICAgX3dyYXAgPSBfb2JqLnBhcmVudCgpO1xuICAgICAgICAgICAgICAgIF93cmFwLmFwcGVuZCggJzxkaXYgY2xhc3M9XCJ3ZWJzdGVycy1zZWxlY3RfX2Fycm93XCI+PC9kaXY+JyApO1xuICAgICAgICAgICAgICAgIF9vYmouYmVmb3JlKCBfdGV4dCApO1xuICAgICAgICAgICAgICAgIF9vYmouZmluZCggJ29wdGlvbicgKS5lYWNoKCBmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgICAgICB2YXIgY3VySXRlbSA9ICQoIHRoaXMgKTtcblxuICAgICAgICAgICAgICAgICAgICBpZiggY3VySXRlbS5hdHRyKCAnc2VsZWN0ZWQnICkgPT0gJ3NlbGVjdGVkJyApe1xuICAgICAgICAgICAgICAgICAgICAgICAgY3VyVGV4dCA9IGN1ckl0ZW0udGV4dCgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICAgICAgaWYoIGN1clRleHQgPT0gJycgKXtcbiAgICAgICAgICAgICAgICAgICAgY3VyVGV4dCA9ICBfb2JqLmZpbmQoICdvcHRpb24nKS5lcSggMCApLnRleHQoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgX3RleHQudGV4dCggY3VyVGV4dCApO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9oaWRlUG9wdXAgPSBmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgIF9vcGVuZWQgPSBmYWxzZTtcblxuICAgICAgICAgICAgICAgIGlmKCAhX3Nob3dUeXBlICl7XG4gICAgICAgICAgICAgICAgICAgIF9wb3B1cC5jc3MoIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6ICdub25lJ1xuICAgICAgICAgICAgICAgICAgICB9ICk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmKCBfc2hvd1R5cGUgPT0gMSApe1xuICAgICAgICAgICAgICAgICAgICBfcG9wdXAuc3RvcCggdHJ1ZSwgZmFsc2UgKS5zbGlkZVVwKCAzMDAsIGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgICAgICAgICBfcG9wdXAucmVtb3ZlKCk7XG4gICAgICAgICAgICAgICAgICAgIH0gKTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYoIF9zaG93VHlwZSA9PSAyICkge1xuICAgICAgICAgICAgICAgICAgICBfcG9wdXAuc3RvcCggdHJ1ZSwgZmFsc2UgKS5mYWRlT3V0KCAzMDAsIGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgICAgICAgICBfcG9wdXAucmVtb3ZlKCk7XG4gICAgICAgICAgICAgICAgICAgIH0gKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBfd3JhcC5yZW1vdmVDbGFzcyggJ3dlYnN0ZXJzLXNlbGVjdF9vcGVuZWQnICk7XG5cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfY29uc3RydWN0b3IgPSBmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgIF9vYmpbIDAgXS5vYmogPSBfc2VsZjtcblxuICAgICAgICAgICAgICAgIF9hZGRXcmFwKCk7XG4gICAgICAgICAgICAgICAgX3NlbGVjdFZpZXdUeXBlKCk7XG4gICAgICAgICAgICAgICAgX29uRXZlbnRzKCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX29uRXZlbnRzID0gZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICBfb2JqLm9uKCAnY2hhbmdlJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgIF90ZXh0LnRleHQoICQoIHRoaXMgKS5maW5kKCAnb3B0aW9uOnNlbGVjdGVkJyApLnRleHQoKSApO1xuICAgICAgICAgICAgICAgIH0gKTtcblxuICAgICAgICAgICAgICAgIGlmKCBfb3B0aW9uVHlwZSA9PSAxICYmICFfZGV2aWNlICl7XG4gICAgICAgICAgICAgICAgICAgIF93cmFwLm9uKCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAnY2xpY2snOiBmdW5jdGlvbiggZSApe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiggX29wZW5lZCApe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfaGlkZVBvcHVwKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3Nob3dQb3B1cCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9ICk7XG5cbiAgICAgICAgICAgICAgICAgICAgX3dpbmRvdy5vbigge1xuICAgICAgICAgICAgICAgICAgICAgICAgJ2NsaWNrJzogZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiggX29wZW5lZCApe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfaGlkZVBvcHVwKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9ICk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgJCgnLm5pY2Utc2Nyb2xsJykub24oIHtcblxuICAgICAgICAgICAgICAgICAgICBzY3JvbGw6IGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiggX29wZW5lZCApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfaGlkZVBvcHVwKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgfSApO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9zZWxlY3RWaWV3VHlwZSA9IGZ1bmN0aW9uKCl7XG5cbiAgICAgICAgICAgICAgICBpZiggIV9vcHRpb25UeXBlIHx8IF9kZXZpY2UgKXtcbiAgICAgICAgICAgICAgICAgICAgX3NldE1vYmlsZVZpZXcoKTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYoIF9vcHRpb25UeXBlID09IDEgKXtcbiAgICAgICAgICAgICAgICAgICAgX3NldEN1c3RvbTEoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX3NldEN1c3RvbTEgPSBmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgIF93cmFwLmFkZENsYXNzKCAnd2Vic3RlcnMtc2VsZWN0X2N1c3RvbScgKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfc2V0TW9iaWxlVmlldyA9IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgX3dyYXAuYWRkQ2xhc3MoICd3ZWJzdGVycy1zZWxlY3RfbW9iaWxlJyApO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9zaG93UG9wdXAgPSBmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgIHZhciBzZWxlY3RzID0gJCggJ3NlbGVjdCcgKSxcbiAgICAgICAgICAgICAgICAgICAgbGlzdCA9ICQoICc8dWw+PC91bD4nKSxcbiAgICAgICAgICAgICAgICAgICAgY3VyU2Nyb2xsID0gX3dpbmRvdy5zY3JvbGxUb3AoKSxcbiAgICAgICAgICAgICAgICAgICAgb2Zmc2V0ID0gX3dyYXAub2Zmc2V0KCksXG4gICAgICAgICAgICAgICAgICAgIG1heEhlaWdodCA9IDAsXG4gICAgICAgICAgICAgICAgICAgIGN1ckluZGV4ID0gX29iai5maW5kKCAnb3B0aW9uOnNlbGVjdGVkJyApLmluZGV4KCksXG4gICAgICAgICAgICAgICAgICAgIGlkID0gTWF0aC5yb3VuZCggTWF0aC5yYW5kb20oKSAqIDEwMDAgKTtcblxuICAgICAgICAgICAgICAgIHNlbGVjdHMuZWFjaCggZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICAgICAgaWYoIHRoaXMgIT09IF9vYmpbIDAgXSAmJiB0aGlzLm9iai5jaGVja09wZW5lZCgpICl7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm9iai5jbG9zZSgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICAgICAgaWYoIF9vcGVuZWQgKXtcbiAgICAgICAgICAgICAgICAgICAgX3BvcHVwLnJlbW92ZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBfb3BlbmVkID0gdHJ1ZTtcblxuICAgICAgICAgICAgICAgIF9wb3B1cCA9ICQoICc8ZGl2IGNsYXNzPVwid2Vic3RlcnMtc2VsZWN0X19wb3B1cFwiIGlkPVwid2Vic3RlcnMtc2VsZWN0X19wb3B1cCcgKyBpZCArICdcIj48L2Rpdj4nICk7XG5cbiAgICAgICAgICAgICAgICBfb2JqLmZpbmQoICdvcHRpb24nICkuZWFjaCggZnVuY3Rpb24oIGkgKXtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGN1ckl0ZW0gPSAkKCB0aGlzICk7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYoIGkgPT0gY3VySW5kZXggKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxpc3QuYXBwZW5kKCAnPGxpIGNsYXNzPVwiYWN0aXZlXCI+JyArIGN1ckl0ZW0udGV4dCgpICsgJzwvbGk+JyApO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGlzdC5hcHBlbmQoICc8bGk+JyArIGN1ckl0ZW0udGV4dCgpICsgJzwvbGk+JyApO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB9ICk7XG5cbiAgICAgICAgICAgICAgICBfcG9wdXAuYXBwZW5kKCBsaXN0ICk7XG4gICAgICAgICAgICAgICAgX2JvZHkuYXBwZW5kKCBfcG9wdXAgKTtcbiAgICAgICAgICAgICAgICBfd3JhcC5hZGRDbGFzcyggJ3dlYnN0ZXJzLXNlbGVjdF9vcGVuZWQnICk7XG5cbiAgICAgICAgICAgICAgICBfcG9wdXAuY3NzKCB7XG4gICAgICAgICAgICAgICAgICAgIHdpZHRoOiBfd3JhcC5vdXRlcldpZHRoKCksXG4gICAgICAgICAgICAgICAgICAgIGxlZnQ6IG9mZnNldC5sZWZ0LFxuICAgICAgICAgICAgICAgICAgICB0b3A6IG9mZnNldC50b3AgKyBfd3JhcC5vdXRlckhlaWdodCgpXG4gICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICAgICAgbWF4SGVpZ2h0ID0gX3BvcHVwLm91dGVySGVpZ2h0KCk7XG4gICAgICAgICAgICAgICAgaWYoIG1heEhlaWdodCA+IF9wb3B1cC5maW5kKCAnbGknICkuZXEoIDAgKS5vdXRlckhlaWdodCgpICogX3Zpc2libGUgKXtcbiAgICAgICAgICAgICAgICAgICAgX3BvcHVwLmhlaWdodCggX3BvcHVwLmZpbmQoICdsaScgKS5lcSggMCApLm91dGVySGVpZ2h0KCkgKiBfdmlzaWJsZSApO1xuICAgICAgICAgICAgICAgICAgICBfc2Nyb2xsID0gX3BvcHVwLm5pY2VTY3JvbGwoIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGhvcml6cmFpbGVuYWJsZWQ6IGZhbHNlXG4gICAgICAgICAgICAgICAgICAgIH0gKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiggX3Nob3dUeXBlID09IDEgKXtcbiAgICAgICAgICAgICAgICAgICAgX3BvcHVwLmNzcygge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGlzcGxheTogJ25vbmUnXG4gICAgICAgICAgICAgICAgICAgIH0gKTtcbiAgICAgICAgICAgICAgICAgICAgX3BvcHVwLnNsaWRlRG93biggMzAwICk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmKCBfc2hvd1R5cGUgPT0gMiApIHtcbiAgICAgICAgICAgICAgICAgICAgX3BvcHVwLmNzcygge1xuICAgICAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMC4xXG4gICAgICAgICAgICAgICAgICAgIH0gKTtcbiAgICAgICAgICAgICAgICAgICAgX3BvcHVwLmFuaW1hdGUoIHsgb3BhY2l0eTogMSB9LCAzMDApO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIF9wb3B1cC5maW5kKCAnbGknICkub24oIHtcbiAgICAgICAgICAgICAgICAgICAgJ2NsaWNrJzogZnVuY3Rpb24oIGUgKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpbmRleCA9ICQoIHRoaXMgKS5pbmRleCgpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBfb2JqLnZhbCggX29iai5maW5kKCAnb3B0aW9uJyApLmVxKCBpbmRleCApLmF0dHIoICd2YWx1ZScgKSApO1xuICAgICAgICAgICAgICAgICAgICAgICAgX29iai50cmlnZ2VyKCAnY2hhbmdlJyApO1xuICAgICAgICAgICAgICAgICAgICAgICAgX2hpZGVQb3B1cCgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICB9O1xuXG4gICAgICAgIC8vcHVibGljIHByb3BlcnRpZXNcblxuICAgICAgICAvL3B1YmxpYyBtZXRob2RzXG4gICAgICAgIF9zZWxmLmNoZWNrT3BlbmVkID0gZnVuY3Rpb24oKXtcbiAgICAgICAgICAgIHJldHVybiBfb3BlbmVkO1xuICAgICAgICB9O1xuICAgICAgICBfc2VsZi5jbG9zZSA9IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgX2hpZGVQb3B1cCgpO1xuICAgICAgICB9O1xuXG5cbiAgICAgICAgX2NvbnN0cnVjdG9yKCk7XG5cbiAgICB9O1xuXG59ICkoKTsiXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
