!function(){$(function(){"use strict";$.each($(".nice-scroll"),function(){new i($(this))}),$.each($(".site"),function(){new e($(this))}),$.each($(".site__content__wrap"),function(){new n($(this))}),$.each($(".site__header"),function(){new t($(this))}),$.each($(".menu"),function(){new i($(this))}),$.each($("body"),function(){new o($(this))}),$.each($(".gallery"),function(){new s($(this))}),$.each($(".site__read-more"),function(){new c($(this))})});var e=function(e){var n=this,t=e,i=$(window),o=function(){var e=document.createElement("p");e.style.width="100%",e.style.height="200px";var n=document.createElement("div");n.style.position="absolute",n.style.top="0px",n.style.left="0px",n.style.visibility="hidden",n.style.width="200px",n.style.height="150px",n.style.overflow="hidden",n.appendChild(e),document.body.appendChild(n);var t=e.offsetWidth;n.style.overflow="scroll";var i=e.offsetWidth;return t==i&&(i=n.clientWidth),document.body.removeChild(n),t-i},s=function(){i.on({resize:function(){i.width()>=1024-o()&&d()}})},c=function(){s(),i.width()>=1024-o()&&d(),t[0].obj=n},d=function(){i.height()>=500?t.css({"min-height":"100%"}):t.css({"min-height":"500px"})};c()},n=function(e){var n=this,t=e,i=$(window),o=$(".site__content > .site__title"),s=function(){var e=document.createElement("p");e.style.width="100%",e.style.height="200px";var n=document.createElement("div");n.style.position="absolute",n.style.top="0px",n.style.left="0px",n.style.visibility="hidden",n.style.width="200px",n.style.height="150px",n.style.overflow="hidden",n.appendChild(e),document.body.appendChild(n);var t=e.offsetWidth;n.style.overflow="scroll";var i=e.offsetWidth;return t==i&&(i=n.clientWidth),document.body.removeChild(n),t-i},c=function(){i.on({resize:function(){i.width()>=1024-s()?l():r()},load:function(){i.width()>=1024-s()&&l()}})},d=function(){c(),t[0].obj=n},l=function(){var e=o.offset().top+o.outerHeight(!0);t.css({top:e})},r=function(){t.css({top:"auto"})};d()},t=function(e){var n=this,t=e,i=$(window),o=t.find(".site__header__btn"),s=(t.find(".menu"),$("html")),c=function(){i.on({resize:function(){t.hasClass("opened")&&(t.removeClass("opened"),s.css({"overflow-y":"auto"}))}}),o.on({click:function(){return t.hasClass("opened")?(t.removeClass("opened"),s.css({"overflow-y":"auto"})):(t.addClass("opened"),s.css({"overflow-y":"hidden"})),!1}})},d=function(){c(),t[0].obj=n};d()},i=function(e){var n=this,t=e,i=$(window),o=function(){setTimeout(function(){t.niceScroll({cursorcolor:"#fec303",cursoropacitymin:"1",cursorborderradius:"2px",cursorborder:"none",background:"#3d3e42",cursorwidth:"5px",enablemousewheel:!0})},10),setTimeout(function(){t.getNiceScroll().resize()},100)},s=function(){i.on({load:function(){o()}})},c=function(){s(),t[0].obj=n};c()},o=function(e){var n=this,t=e,i=$(window),o=$("body"),s=function(){i.on({resize:function(){d()}})},c=function(){s(),d(),t[0].obj=n},d=function(){var e;e=i.height()>500?100*(window.innerHeight/900)+"px":100*(500/900)+"px",o.css({"font-size":e})};c()},s=function(e){var n=e.find(".gallery__top"),t=e.find(".gallery__thumbs"),i=function(){var e=new Swiper(n,{nextButton:t.find(".swiper-button-next"),prevButton:t.find(".swiper-button-prev"),spaceBetween:10,onSlideChangeStart:function(e){var n=e.activeIndex;$(i.slides).removeClass("is-selected"),$(i.slides).eq(n).addClass("is-selected"),i.slideTo(n,500,!1)}}),i=new Swiper(t.find(".swiper-container"),{spaceBetween:37,freeMode:!0,centeredSlides:!1,slidesPerView:"auto",touchRatio:.2,onClick:function(n){var t=n.clickedIndex;n.activeIndex=t,n.updateClasses(),$(n.slides).removeClass("is-selected"),$(n.clickedSlide).addClass("is-selected"),e.slideTo(t,0,!1)},onInit:function(){var e,n=t.find(".swiper-slide").length;10>n&&(n="0"+n),t.find(".gallery__thumbs-total-count").text(n),t.find(".swiper-slide").each(function(){e=$(this).index()+1,10>e?e="0"+e:0==e[0]&&(e=e.slice(1)),$(this).find(".gallery__thumbs-current-num").text(e)})}})},o=function(){i()};o()},c=function(e){var n,t=this,i=e,o=($(window),$("body"),function(){i.on({click:function(){return d(),!1}})}),s=function(){o(),c(),i[0].obj=t},c=function(){n=i.parent().nextAll(),n.css({display:"none"})},d=function(){n.css({display:"block"}),i.css({display:"none"})};s()}}();
!function(){$(function(){$("select").each(function(){new e({obj:$(this),optionType:1,showType:2})})});var e=function(e){var t,i,n=this,o=e.obj,s=e.optionType||0,c=e.showType||0,a=e.visible||5,l=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),d=$('<span class="websters-select__item"></span>'),p=$('<div class="websters-select"></div>'),r=$(window),f=$("body"),u=!1,h=function(){var e="";o.css({opacity:0}),o.wrap(p),p=o.parent(),p.append('<div class="websters-select__arrow"></div>'),o.before(d),o.find("option").each(function(){var t=$(this);"selected"==t.attr("selected")&&(e=t.text())}),""==e&&(e=o.find("option").eq(0).text()),d.text(e)},v=function(){u=!1,c?1==c?t.stop(!0,!1).slideUp(300,function(){t.remove()}):2==c&&t.stop(!0,!1).fadeOut(300,function(){t.remove()}):t.css({display:"none"}),p.removeClass("websters-select_opened")},b=function(){o[0].obj=n,h(),g(),w()},w=function(){o.on("change",function(){d.text($(this).find("option:selected").text())}),1!=s||l||(p.on({click:function(e){e.stopPropagation(),u?v():m()}}),r.on({click:function(){u&&v()}}))},g=function(){!s||l?y():1==s&&_()},_=function(){p.addClass("websters-select_custom")},y=function(){p.addClass("websters-select_mobile")},m=function(){var e=$("select"),n=$("<ul></ul>"),s=(r.scrollTop(),p.offset()),l=0,d=o.find("option:selected").index(),h=Math.round(1e3*Math.random());e.each(function(){this!==o[0]&&this.obj.checkOpened()&&this.obj.close()}),u&&t.remove(),u=!0,t=$('<div class="websters-select__popup" id="websters-select__popup'+h+'"></div>'),o.find("option").each(function(e){var t=$(this);e==d?n.append('<li class="active">'+t.text()+"</li>"):n.append("<li>"+t.text()+"</li>")}),t.append(n),f.append(t),p.addClass("websters-select_opened"),t.css({width:p.outerWidth(),left:s.left,top:s.top+p.outerHeight()}),l=t.outerHeight(),l>t.find("li").eq(0).outerHeight()*a&&(t.height(t.find("li").eq(0).outerHeight()*a),i=t.niceScroll({horizrailenabled:!1})),1==c?(t.css({display:"none"}),t.slideDown(300)):2==c&&(t.css({opacity:.1}),t.animate({opacity:1},300)),t.find("li").on({click:function(e){var t=$(this).index();e.stopPropagation(),o.val(o.find("option").eq(t).attr("value")),o.trigger("change"),v()}})};n.checkOpened=function(){return u},n.close=function(){v()},b()}}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImpxdWVyeS5tYWluLmpzIiwianF1ZXJ5LndlYnN0ZXJzLXNlbGVjdC5qcyJdLCJuYW1lcyI6WyIkIiwiZWFjaCIsIk5pY2VTY3JvbGwiLCJ0aGlzIiwiRnVsbEhlaWdodFNpdGUiLCJGdWxsSGVpZ2h0U2l0ZUlubmVyIiwiTWVudSIsIlpvb21TaXRlIiwiU3dpcGVyR2FsbGVyeSIsIlJlYWRNb3JlIiwib2JqIiwiX3NlbGYiLCJfb2JqIiwiX3dpbmRvdyIsIndpbmRvdyIsIl9nZXRTY3JvbGxCYXJXaWR0aCIsImlubmVyIiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50Iiwic3R5bGUiLCJ3aWR0aCIsImhlaWdodCIsIm91dGVyIiwicG9zaXRpb24iLCJ0b3AiLCJsZWZ0IiwidmlzaWJpbGl0eSIsIm92ZXJmbG93IiwiYXBwZW5kQ2hpbGQiLCJib2R5IiwidzEiLCJvZmZzZXRXaWR0aCIsIncyIiwiY2xpZW50V2lkdGgiLCJyZW1vdmVDaGlsZCIsIl9vbkV2ZW50cyIsIm9uIiwicmVzaXplIiwiX3NldEhlaWdodCIsIl9pbml0IiwiY3NzIiwibWluLWhlaWdodCIsIl90aXRsZSIsIl9zZXRQb3NUb3AiLCJfcmVzZXRQb3NUb3AiLCJsb2FkIiwiYmxhIiwib2Zmc2V0Iiwib3V0ZXJIZWlnaHQiLCJfbWVudUJ0biIsImZpbmQiLCJfaHRtbCIsImhhc0NsYXNzIiwicmVtb3ZlQ2xhc3MiLCJvdmVyZmxvdy15IiwiY2xpY2siLCJhZGRDbGFzcyIsIl9hZGRTY3JvbGwiLCJzZXRUaW1lb3V0IiwibmljZVNjcm9sbCIsImN1cnNvcmNvbG9yIiwiY3Vyc29yb3BhY2l0eW1pbiIsImN1cnNvcmJvcmRlcnJhZGl1cyIsImN1cnNvcmJvcmRlciIsImJhY2tncm91bmQiLCJjdXJzb3J3aWR0aCIsImVuYWJsZW1vdXNld2hlZWwiLCJnZXROaWNlU2Nyb2xsIiwiX2JvZHkiLCJfc2V0U2l6ZSIsIm5ld1NpemUiLCJpbm5lckhlaWdodCIsImZvbnQtc2l6ZSIsIl9nYWxsZXJ5VG9wIiwiX2dhbGxlcnlUaHVtYnMiLCJfaW5pdFN3aXBlciIsImdhbGxlcnlUb3AiLCJTd2lwZXIiLCJuZXh0QnV0dG9uIiwicHJldkJ1dHRvbiIsInNwYWNlQmV0d2VlbiIsIm9uU2xpZGVDaGFuZ2VTdGFydCIsInN3aXBlciIsImFjdGl2ZUluZGV4IiwiZ2FsbGVyeVRodW1icyIsInNsaWRlcyIsImVxIiwic2xpZGVUbyIsImZyZWVNb2RlIiwiY2VudGVyZWRTbGlkZXMiLCJzbGlkZXNQZXJWaWV3IiwidG91Y2hSYXRpbyIsIm9uQ2xpY2siLCJjbGlja2VkIiwiY2xpY2tlZEluZGV4IiwidXBkYXRlQ2xhc3NlcyIsImNsaWNrZWRTbGlkZSIsIm9uSW5pdCIsImN1cnJlbnROdW0iLCJ0b3RhbENvdW50IiwibGVuZ3RoIiwidGV4dCIsImluZGV4Iiwic2xpY2UiLCJfaXRlbXMiLCJfZGlzcGxheUl0ZW1zIiwiX2Rpc2FwcGVhckl0ZW1zIiwicGFyZW50IiwibmV4dEFsbCIsImRpc3BsYXkiLCJXZWJzdGVyc1NlbGVjdCIsIm9wdGlvblR5cGUiLCJzaG93VHlwZSIsInBhcmFtcyIsIl9wb3B1cCIsIl9zY3JvbGwiLCJfb3B0aW9uVHlwZSIsIl9zaG93VHlwZSIsIl92aXNpYmxlIiwidmlzaWJsZSIsIl9kZXZpY2UiLCJ0ZXN0IiwibmF2aWdhdG9yIiwidXNlckFnZW50IiwiX3RleHQiLCJfd3JhcCIsIl9vcGVuZWQiLCJfYWRkV3JhcCIsImN1clRleHQiLCJvcGFjaXR5Iiwid3JhcCIsImFwcGVuZCIsImJlZm9yZSIsImN1ckl0ZW0iLCJhdHRyIiwiX2hpZGVQb3B1cCIsInN0b3AiLCJzbGlkZVVwIiwicmVtb3ZlIiwiZmFkZU91dCIsIl9jb25zdHJ1Y3RvciIsIl9zZWxlY3RWaWV3VHlwZSIsImUiLCJzdG9wUHJvcGFnYXRpb24iLCJfc2hvd1BvcHVwIiwiX3NldE1vYmlsZVZpZXciLCJfc2V0Q3VzdG9tMSIsInNlbGVjdHMiLCJsaXN0Iiwic2Nyb2xsVG9wIiwibWF4SGVpZ2h0IiwiY3VySW5kZXgiLCJpZCIsIk1hdGgiLCJyb3VuZCIsInJhbmRvbSIsImNoZWNrT3BlbmVkIiwiY2xvc2UiLCJpIiwib3V0ZXJXaWR0aCIsImhvcml6cmFpbGVuYWJsZWQiLCJzbGlkZURvd24iLCJhbmltYXRlIiwidmFsIiwidHJpZ2dlciJdLCJtYXBwaW5ncyI6IkNBQUEsV0FFSUEsRUFBRyxXQUNDLFlBRUFBLEdBQUVDLEtBQU1ELEVBQUUsZ0JBQWlCLFdBRXZCLEdBQUlFLEdBQVlGLEVBQUVHLFNBSXRCSCxFQUFFQyxLQUFNRCxFQUFFLFNBQVUsV0FFaEIsR0FBSUksR0FBZ0JKLEVBQUVHLFNBSTFCSCxFQUFFQyxLQUFNRCxFQUFFLHdCQUF5QixXQUUvQixHQUFJSyxHQUFxQkwsRUFBRUcsU0FJL0JILEVBQUVDLEtBQU1ELEVBQUUsaUJBQWtCLFdBRXhCLEdBQUlNLEdBQU1OLEVBQUVHLFNBSWhCSCxFQUFFQyxLQUFNRCxFQUFFLFNBQVUsV0FFaEIsR0FBSUUsR0FBWUYsRUFBRUcsU0FJdEJILEVBQUVDLEtBQU1ELEVBQUUsUUFBUyxXQUVmLEdBQUlPLEdBQVVQLEVBQUVHLFNBSXBCSCxFQUFFQyxLQUFNRCxFQUFHLFlBQWMsV0FDckIsR0FBSVEsR0FBZVIsRUFBRUcsU0FHekJILEVBQUVDLEtBQU1ELEVBQUcsb0JBQXNCLFdBQzdCLEdBQUlTLEdBQVVULEVBQUVHLFVBTXhCLElBQUlDLEdBQWlCLFNBQVVNLEdBRzNCLEdBQUlDLEdBQVFSLEtBQ1JTLEVBQU9GLEVBQ1BHLEVBQVViLEVBQUVjLFFBR1pDLEVBQXFCLFdBRWpCLEdBQUlDLEdBQVFDLFNBQVNDLGNBQWMsSUFDbkNGLEdBQU1HLE1BQU1DLE1BQVEsT0FDcEJKLEVBQU1HLE1BQU1FLE9BQVMsT0FFckIsSUFBSUMsR0FBUUwsU0FBU0MsY0FBYyxNQUNuQ0ksR0FBTUgsTUFBTUksU0FBVyxXQUN2QkQsRUFBTUgsTUFBTUssSUFBTSxNQUNsQkYsRUFBTUgsTUFBTU0sS0FBTyxNQUNuQkgsRUFBTUgsTUFBTU8sV0FBYSxTQUN6QkosRUFBTUgsTUFBTUMsTUFB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LEVBQU0rRCxPQUFRakIsR0FDZFcsRUFBTXJFLFNBQVUsMEJBRWhCMEQsRUFBTzFFLEtBQ0hwQixNQUFPeUcsRUFBTWtDLGFBQ2J0SSxLQUFNc0IsRUFBT3RCLEtBQ2JELElBQUt1QixFQUFPdkIsSUFBTXFHLEVBQU03RSxnQkFHNUJzRyxFQUFZcEMsRUFBT2xFLGNBQ2ZzRyxFQUFZcEMsRUFBT2hFLEtBQU0sTUFBT29DLEdBQUksR0FBSXRDLGNBQWdCc0UsSUFDeERKLEVBQU83RixPQUFRNkYsRUFBT2hFLEtBQU0sTUFBT29DLEdBQUksR0FBSXRDLGNBQWdCc0UsR0FDM0RILEVBQVVELEVBQU92RCxZQUNicUcsa0JBQWtCLEtBSVQsR0FBYjNDLEdBQ0FILEVBQU8xRSxLQUNIcUUsUUFBUyxTQUViSyxFQUFPK0MsVUFBVyxNQUNFLEdBQWI1QyxJQUNQSCxFQUFPMUUsS0FDSHlGLFFBQVMsS0FFYmYsRUFBT2dELFNBQVdqQyxRQUFTLEdBQUssTUFHcENmLEVBQU9oRSxLQUFNLE1BQU9kLElBQ2hCbUIsTUFBUyxTQUFVdUYsR0FDZixHQUFJeEMsR0FBUXRHLEVBQUdHLE1BQU9tRyxPQUV0QndDLEdBQUVDLGtCQUVGbkksRUFBS3VKLElBQUt2SixFQUFLc0MsS0FBTSxVQUFXb0MsR0FBSWdCLEdBQVFnQyxLQUFNLFVBQ2xEMUgsRUFBS3dKLFFBQVMsVUFDZDdCLE9BU2hCNUgsR0FBTWlKLFlBQWMsV0FDaEIsTUFBTzlCLElBRVhuSCxFQUFNa0osTUFBUSxXQUNadEIsS0FJRksiLCJmaWxlIjoibWFpbi5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIoIGZ1bmN0aW9uKCl7XHJcblxyXG4gICAgJCggZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgICAgICAkLmVhY2goICQoJy5uaWNlLXNjcm9sbCcpLCBmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgICAgICAgICBuZXcgTmljZVNjcm9sbCggJCh0aGlzKSApO1xyXG5cclxuICAgICAgICB9ICk7XHJcblxyXG4gICAgICAgICQuZWFjaCggJCgnLnNpdGUnKSwgZnVuY3Rpb24gKCkge1xyXG5cclxuICAgICAgICAgICAgbmV3IEZ1bGxIZWlnaHRTaXRlKCAkKHRoaXMpICk7XHJcblxyXG4gICAgICAgIH0gKTtcclxuXHJcbiAgICAgICAgJC5lYWNoKCAkKCcuc2l0ZV9fY29udGVudF9fd3JhcCcpLCBmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgICAgICAgICBuZXcgRnVsbEhlaWdodFNpdGVJbm5lciggJCh0aGlzKSApO1xyXG5cclxuICAgICAgICB9ICk7XHJcblxyXG4gICAgICAgICQuZWFjaCggJCgnLnNpdGVfX2hlYWRlcicpLCBmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgICAgICAgICBuZXcgTWVudSggJCh0aGlzKSApO1xyXG5cclxuICAgICAgICB9ICk7XHJcblxyXG4gICAgICAgICQuZWFjaCggJCgnLm1lbnUnKSwgZnVuY3Rpb24gKCkge1xyXG5cclxuICAgICAgICAgICAgbmV3IE5pY2VTY3JvbGwoICQodGhpcykgKTtcclxuXHJcbiAgICAgICAgfSApO1xyXG5cclxuICAgICAgICAkLmVhY2goICQoJ2JvZHknKSwgZnVuY3Rpb24gKCkge1xyXG5cclxuICAgICAgICAgICAgbmV3IFpvb21TaXRlKCAkKHRoaXMpICk7XHJcblxyXG4gICAgICAgIH0gKTtcclxuXHJcbiAgICAgICAgJC5lYWNoKCAkKCAnLmdhbGxlcnknICksIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgbmV3IFN3aXBlckdhbGxlcnkoICQodGhpcykgKTtcclxuICAgICAgICB9ICk7XHJcblxyXG4gICAgICAgICQuZWFjaCggJCggJy5zaXRlX19yZWFkLW1vcmUnICksIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgbmV3IFJlYWRNb3JlKCAkKHRoaXMpICk7XHJcbiAgICAgICAgfSApO1xyXG5cclxuXHJcbiAgICB9ICk7XHJcblxyXG4gICAgdmFyIEZ1bGxIZWlnaHRTaXRlID0gZnVuY3Rpb24gKG9iaikge1xyXG5cclxuICAgICAgICAvL3ByaXZhdGUgcHJvcGVydGllc1xyXG4gICAgICAgIHZhciBfc2VsZiA9IHRoaXMsXHJcbiAgICAgICAgICAgIF9vYmogPSBvYmosXHJcbiAgICAgICAgICAgIF93aW5kb3cgPSAkKHdpbmRvdyk7XHJcblxyXG4gICAgICAgIC8vcHJpdmF0ZSBtZXRob2RzXHJcbiAgICAgICAgdmFyIF9nZXRTY3JvbGxCYXJXaWR0aCA9IGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgaW5uZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJyk7XHJcbiAgICAgICAgICAgICAgICBpbm5lci5zdHlsZS53aWR0aCA9IFwiMTAwJVwiO1xyXG4gICAgICAgICAgICAgICAgaW5uZXIuc3R5bGUuaGVpZ2h0ID0gXCIyMDBweFwiO1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBvdXRlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgICAgICAgICAgb3V0ZXIuc3R5bGUucG9zaXRpb24gPSBcImFic29sdXRlXCI7XHJcbiAgICAgICAgICAgICAgICBvdXRlci5zdHlsZS50b3AgPSBcIjBweFwiO1xyXG4gICAgICAgICAgICAgICAgb3V0ZXIuc3R5bGUubGVmdCA9IFwiMHB4XCI7XHJcbiAgICAgICAgICAgICAgICBvdXRlci5zdHlsZS52aXNpYmlsaXR5ID0gXCJoaWRkZW5cIjtcclxuICAgICAgICAgICAgICAgIG91dGVyLnN0eWxlLndpZHRoID0gXCIyMDBweFwiO1xyXG4gICAgICAgICAgICAgICAgb3V0ZXIuc3R5bGUuaGVpZ2h0ID0gXCIxNTBweFwiO1xyXG4gICAgICAgICAgICAgICAgb3V0ZXIuc3R5bGUub3ZlcmZsb3cgPSBcImhpZGRlblwiO1xyXG4gICAgICAgICAgICAgICAgb3V0ZXIuYXBwZW5kQ2hpbGQgKGlubmVyKTtcclxuXHJcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkIChvdXRlcik7XHJcbiAgICAgICAgICAgICAgICB2YXIgdzEgPSBpbm5lci5vZmZzZXRXaWR0aDtcclxuICAgICAgICAgICAgICAgIG91dGVyLnN0eWxlLm92ZXJmbG93ID0gJ3Njcm9sbCc7XHJcbiAgICAgICAgICAgICAgICB2YXIgdzIgPSBpbm5lci5vZmZzZXRXaWR0aDtcclxuICAgICAgICAgICAgICAgIGlmICh3MSA9PSB3MikgdzIgPSBvdXRlci5jbGllbnRXaWR0aDtcclxuXHJcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkIChvdXRlcik7XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuICh3MSAtIHcyKTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgX29uRXZlbnRzID0gZnVuY3Rpb24gKCkge1xyXG5cclxuICAgICAgICAgICAgICAgIF93aW5kb3cub24oIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcmVzaXplOiBmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiggX3dpbmRvdy53aWR0aCgpID49IDEwMjQgLSBfZ2V0U2Nyb2xsQmFyV2lkdGgoKSApIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfc2V0SGVpZ2h0KCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB9ICk7XHJcblxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBfaW5pdCA9IGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICAgICAgICAgICAgICBfb25FdmVudHMoKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiggX3dpbmRvdy53aWR0aCgpID49IDEwMjQgLSBfZ2V0U2Nyb2xsQmFyV2lkdGgoKSApIHtcclxuICAgICAgICAgICAgICAgICAgICBfc2V0SGVpZ2h0KCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBfb2JqWzBdLm9iaiA9IF9zZWxmO1xyXG5cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgX3NldEhlaWdodCA9IGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiggX3dpbmRvdy5oZWlnaHQoKSA+PSA1MDAgKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIF9vYmouY3NzKCB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAnbWluLWhlaWdodCc6ICcxMDAlJ1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB9ICk7XHJcblxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgX29iai5jc3MoIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICdtaW4taGVpZ2h0JzogJzUwMHB4J1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB9ICk7XHJcblxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgX2luaXQoKTtcclxuICAgIH07XHJcblxyXG4gICAgdmFyIEZ1bGxIZWlnaHRTaXRlSW5uZXIgPSBmdW5jdGlvbiAob2JqKSB7XHJcblxyXG4gICAgICAgIC8vcHJpdmF0ZSBwcm9wZXJ0aWVzXHJcbiAgICAgICAgdmFyIF9zZWxmID0gdGhpcyxcclxuICAgICAgICAgICAgX29iaiA9IG9iaixcclxuICAgICAgICAgICAgX3dpbmRvdyA9ICQod2luZG93KSxcclxuICAgICAgICAgICAgX3RpdGxlID0gJCgnLnNpdGVfX2NvbnRlbnQgPiAuc2l0ZV9fdGl0bGUnKTtcclxuXHJcbiAgICAgICAgLy9wcml2YXRlIG1ldGhvZHNcclxuICAgICAgICB2YXIgX2dldFNjcm9sbEJhcldpZHRoID0gZnVuY3Rpb24gKCkge1xyXG5cclxuICAgICAgICAgICAgdmFyIGlubmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncCcpO1xyXG4gICAgICAgICAgICBpbm5lci5zdHlsZS53aWR0aCA9IFwiMTAwJVwiO1xyXG4gICAgICAgICAgICBpbm5lci5zdHlsZS5oZWlnaHQgPSBcIjIwMHB4XCI7XHJcblxyXG4gICAgICAgICAgICB2YXIgb3V0ZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICAgICAgb3V0ZXIuc3R5bGUucG9zaXRpb24gPSBcImFic29sdXRlXCI7XHJcbiAgICAgICAgICAgIG91dGVyLnN0eWxlLnRvcCA9IFwiMHB4XCI7XHJcbiAgICAgICAgICAgIG91dGVyLnN0eWxlLmxlZnQgPSBcIjBweFwiO1xyXG4gICAgICAgICAgICBvdXRlci5zdHlsZS52aXNpYmlsaXR5ID0gXCJoaWRkZW5cIjtcclxuICAgICAgICAgICAgb3V0ZXIuc3R5bGUud2lkdGggPSBcIjIwMHB4XCI7XHJcbiAgICAgICAgICAgIG91dGVyLnN0eWxlLmhlaWdodCA9IFwiMTUwcHhcIjtcclxuICAgICAgICAgICAgb3V0ZXIuc3R5bGUub3ZlcmZsb3cgPSBcImhpZGRlblwiO1xyXG4gICAgICAgICAgICBvdXRlci5hcHBlbmRDaGlsZCAoaW5uZXIpO1xyXG5cclxuICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCAob3V0ZXIpO1xyXG4gICAgICAgICAgICB2YXIgdzEgPSBpbm5lci5vZmZzZXRXaWR0aDtcclxuICAgICAgICAgICAgb3V0ZXIuc3R5bGUub3ZlcmZsb3cgPSAnc2Nyb2xsJztcclxuICAgICAgICAgICAgdmFyIHcyID0gaW5uZXIub2Zmc2V0V2lkdGg7XHJcbiAgICAgICAgICAgIGlmICh3MSA9PSB3MikgdzIgPSBvdXRlci5jbGllbnRXaWR0aDtcclxuXHJcbiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQgKG91dGVyKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiAodzEgLSB3Mik7XHJcbiAgICAgICAgfSxcclxuICAgICAgICAgICAgX29uRXZlbnRzID0gZnVuY3Rpb24gKCkge1xyXG5cclxuICAgICAgICAgICAgICAgIF93aW5kb3cub24oIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcmVzaXplOiBmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiggX3dpbmRvdy53aWR0aCgpID49IDEwMjQgLSBfZ2V0U2Nyb2xsQmFyV2lkdGgoKSApIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfc2V0UG9zVG9wKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9yZXNldFBvc1RvcCgpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIGxvYWQ6IGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCBfd2luZG93LndpZHRoKCkgPj0gMTAyNCAtIF9nZXRTY3JvbGxCYXJXaWR0aCgpICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3NldFBvc1RvcCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB9ICk7XHJcblxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBfaW5pdCA9IGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICAgICAgICAgICAgICBfb25FdmVudHMoKTtcclxuICAgICAgICAgICAgICAgIF9vYmpbMF0ub2JqID0gX3NlbGY7XHJcblxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBfc2V0UG9zVG9wID0gZnVuY3Rpb24gKCkge1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBibGEgPSBfdGl0bGUub2Zmc2V0KCkudG9wICsgX3RpdGxlLm91dGVySGVpZ2h0KCB0cnVlICk7XHJcblxyXG4gICAgICAgICAgICAgICAgX29iai5jc3MoIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgJ3RvcCc6IGJsYVxyXG5cclxuICAgICAgICAgICAgICAgIH0gKTtcclxuXHJcblxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBfcmVzZXRQb3NUb3AgPSBmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgX29iai5jc3MoIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgJ3RvcCc6ICdhdXRvJ1xyXG5cclxuICAgICAgICAgICAgICAgIH0gKTtcclxuXHJcblxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICBfaW5pdCgpO1xyXG4gICAgfTtcclxuXHJcbiAgICB2YXIgTWVudSA9IGZ1bmN0aW9uIChvYmopIHtcclxuXHJcbiAgICAgICAgLy9wcml2YXRlIHByb3BlcnRpZXNcclxuICAgICAgICB2YXIgX3NlbGYgPSB0aGlzLFxyXG4gICAgICAgICAgICBfb2JqID0gb2JqLFxyXG4gICAgICAgICAgICBfd2luZG93ID0gJCggd2luZG93KSxcclxuICAgICAgICAgICAgX21lbnVCdG4gPSBfb2JqLmZpbmQoJy5zaXRlX19oZWFkZXJfX2J0bicpLFxyXG4gICAgICAgICAgICBfbWVudSA9IF9vYmouZmluZCgnLm1lbnUnKSxcclxuICAgICAgICAgICAgX2h0bWwgPSAkKCdodG1sJyk7XHJcblxyXG4gICAgICAgIC8vcHJpdmF0ZSBtZXRob2RzXHJcbiAgICAgICAgdmFyIF9vbkV2ZW50cyA9IGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICAgICAgICAgICAgICBfd2luZG93Lm9uKCB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHJlc2l6ZTogZnVuY3Rpb24gKCkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoIF9vYmouaGFzQ2xhc3MoICdvcGVuZWQnICkgKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX29iai5yZW1vdmVDbGFzcyggJ29wZW5lZCcgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9odG1sLmNzcygge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdvdmVyZmxvdy15JzogJ2F1dG8nXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9ICk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB9ICk7XHJcblxyXG4gICAgICAgICAgICAgICAgX21lbnVCdG4ub24oIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgY2xpY2s6IGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCBfb2JqLmhhc0NsYXNzKCAnb3BlbmVkJyApICkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9vYmoucmVtb3ZlQ2xhc3MoICdvcGVuZWQnICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfaHRtbC5jc3MoIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnb3ZlcmZsb3cteSc6ICdhdXRvJ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSApO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfb2JqLmFkZENsYXNzKCAnb3BlbmVkJyApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX2h0bWwuY3NzKCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ292ZXJmbG93LXknOiAnaGlkZGVuJ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSApO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgfSApO1xyXG5cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgX2luaXQgPSBmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgX29uRXZlbnRzKCk7XHJcbiAgICAgICAgICAgICAgICBfb2JqWzBdLm9iaiA9IF9zZWxmO1xyXG5cclxuICAgICAgICAgICAgfTtcclxuXHJcblxyXG4gICAgICAgIF9pbml0KCk7XHJcbiAgICB9O1xyXG5cclxuICAgIHZhciBOaWNlU2Nyb2xsID0gZnVuY3Rpb24gKG9iaikge1xyXG5cclxuICAgICAgICAvL3ByaXZhdGUgcHJvcGVydGllc1xyXG4gICAgICAgIHZhciBfc2VsZiA9IHRoaXMsXHJcbiAgICAgICAgICAgIF9vYmogPSBvYmosXHJcbiAgICAgICAgICAgIF93aW5kb3cgPSAkKCB3aW5kb3cpO1xyXG5cclxuICAgICAgICAvL3ByaXZhdGUgbWV0aG9kc1xyXG4gICAgICAgIHZhciBfYWRkU2Nyb2xsID0gZnVuY3Rpb24gKCkge1xyXG5cclxuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoIGZ1bmN0aW9uKCkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBfb2JqLm5pY2VTY3JvbGwoIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY3Vyc29yY29sb3I6XCIjZmVjMzAzXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnNvcm9wYWNpdHltaW46IFwiMVwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJzb3Jib3JkZXJyYWRpdXM6IFwiMnB4XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnNvcmJvcmRlcjogXCJub25lXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6IFwiIzNkM2U0MlwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJzb3J3aWR0aDogXCI1cHhcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgZW5hYmxlbW91c2V3aGVlbDogdHJ1ZVxyXG4gICAgICAgICAgICAgICAgICAgIH0gKTtcclxuXHJcbiAgICAgICAgICAgICAgICB9LCAxMCApO1xyXG5cclxuICAgICAgICAgICAgc2V0VGltZW91dCggZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgX29iai5nZXROaWNlU2Nyb2xsKCkucmVzaXplKCk7XHJcblxyXG4gICAgICAgICAgICB9LCAxMDAgKTtcclxuXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIF9vbkV2ZW50cyA9IGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICAgICAgICAgICAgICBfd2luZG93Lm9uKCB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGxvYWQ6IGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hZGRTY3JvbGwoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIH0gKTtcclxuXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIF9pbml0ID0gZnVuY3Rpb24gKCkge1xyXG5cclxuICAgICAgICAgICAgICAgIF9vbkV2ZW50cygpO1xyXG4gICAgICAgICAgICAgICAgX29ialswXS5vYmogPSBfc2VsZjtcclxuXHJcbiAgICAgICAgICAgIH07XHJcblxyXG5cclxuICAgICAgICBfaW5pdCgpO1xyXG4gICAgfTtcclxuXHJcbiAgICB2YXIgWm9vbVNpdGUgPSBmdW5jdGlvbiAob2JqKSB7XHJcblxyXG4gICAgICAgIC8vcHJpdmF0ZSBwcm9wZXJ0aWVzXHJcbiAgICAgICAgdmFyIF9zZWxmID0gdGhpcyxcclxuICAgICAgICAgICAgX29iaiA9IG9iaixcclxuICAgICAgICAgICAgX3dpbmRvdyA9ICQoIHdpbmRvdyksXHJcbiAgICAgICAgICAgIF9ib2R5ID0gJCggJ2JvZHknICk7XHJcblxyXG4gICAgICAgIC8vcHJpdmF0ZSBtZXRob2RzXHJcbiAgICAgICAgdmFyXHJcbiAgICAgICAgICAgIF9vbkV2ZW50cyA9IGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICAgICAgICAgICAgICBfd2luZG93Lm9uKCB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHJlc2l6ZTogZnVuY3Rpb24gKCkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgX3NldFNpemUoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIH0gKTtcclxuXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIF9pbml0ID0gZnVuY3Rpb24gKCkge1xyXG5cclxuICAgICAgICAgICAgICAgIF9vbkV2ZW50cygpO1xyXG4gICAgICAgICAgICAgICAgX3NldFNpemUoKTtcclxuICAgICAgICAgICAgICAgIF9vYmpbMF0ub2JqID0gX3NlbGY7XHJcblxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBfc2V0U2l6ZSA9IGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgbmV3U2l6ZTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiggX3dpbmRvdy5oZWlnaHQoKSA+IDUwMCApIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgbmV3U2l6ZSA9ICggMTAwICogKCB3aW5kb3cuaW5uZXJIZWlnaHQgLyA5MDAgKSApICsgJ3B4JztcclxuXHJcblxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgbmV3U2l6ZSA9ICggMTAwICogKCA1MDAgLyA5MDAgKSApICsgJ3B4JztcclxuXHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgX2JvZHkuY3NzKCB7XHJcbiAgICAgICAgICAgICAgICAgICAgJ2ZvbnQtc2l6ZSc6IG5ld1NpemVcclxuICAgICAgICAgICAgICAgIH0gKTtcclxuXHJcbiAgICAgICAgICAgIH07XHJcblxyXG5cclxuICAgICAgICBfaW5pdCgpO1xyXG4gICAgfTtcclxuXHJcbiAgICB2YXIgU3dpcGVyR2FsbGVyeSA9IGZ1bmN0aW9uIChvYmopIHtcclxuXHJcbiAgICAgICAgLy9wcml2YXRlIHByb3BlcnRpZXNcclxuICAgICAgICB2YXIgX3NlbGYgPSB0aGlzLFxyXG4gICAgICAgICAgICBfZ2FsbGVyeVRvcCA9IG9iai5maW5kKCcuZ2FsbGVyeV9fdG9wJyksXHJcbiAgICAgICAgICAgIF9nYWxsZXJ5VGh1bWJzID0gb2JqLmZpbmQoJy5nYWxsZXJ5X190aHVtYnMnKTtcclxuXHJcbiAgICAgICAgLy9wcml2YXRlIG1ldGhvZHNcclxuICAgICAgICB2YXIgX2luaXRTd2lwZXIgPSBmdW5jdGlvbigpe1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBnYWxsZXJ5VG9wID0gbmV3IFN3aXBlciggX2dhbGxlcnlUb3AsIHtcclxuICAgICAgICAgICAgICAgICAgICBuZXh0QnV0dG9uOiBfZ2FsbGVyeVRodW1icy5maW5kKCAnLnN3aXBlci1idXR0b24tbmV4dCcgKSxcclxuICAgICAgICAgICAgICAgICAgICBwcmV2QnV0dG9uOiAgX2dhbGxlcnlUaHVtYnMuZmluZCggJy5zd2lwZXItYnV0dG9uLXByZXYnICksXHJcbiAgICAgICAgICAgICAgICAgICAgc3BhY2VCZXR3ZWVuOiAxMCxcclxuICAgICAgICAgICAgICAgICAgICBvblNsaWRlQ2hhbmdlU3RhcnQ6IGZ1bmN0aW9uKCBzd2lwZXIgKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGFjdGl2ZUluZGV4ID0gc3dpcGVyLmFjdGl2ZUluZGV4O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkKCBnYWxsZXJ5VGh1bWJzLnNsaWRlcyApLnJlbW92ZUNsYXNzKCAnaXMtc2VsZWN0ZWQnICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQoIGdhbGxlcnlUaHVtYnMuc2xpZGVzICkuZXEoIGFjdGl2ZUluZGV4ICkuYWRkQ2xhc3MoICdpcy1zZWxlY3RlZCcgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZ2FsbGVyeVRodW1icy5zbGlkZVRvKCBhY3RpdmVJbmRleCwgNTAwLCBmYWxzZSApO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIHZhciBnYWxsZXJ5VGh1bWJzID0gbmV3IFN3aXBlciggX2dhbGxlcnlUaHVtYnMuZmluZCggJy5zd2lwZXItY29udGFpbmVyJyApLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgc3BhY2VCZXR3ZWVuOiAzNyxcclxuICAgICAgICAgICAgICAgICAgICBmcmVlTW9kZTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICBjZW50ZXJlZFNsaWRlczogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgc2xpZGVzUGVyVmlldzogJ2F1dG8nLFxyXG4gICAgICAgICAgICAgICAgICAgIHRvdWNoUmF0aW86IDAuMixcclxuICAgICAgICAgICAgICAgICAgICBvbkNsaWNrOiBmdW5jdGlvbiAoIHN3aXBlciApe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY2xpY2tlZCA9IHN3aXBlci5jbGlja2VkSW5kZXg7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN3aXBlci5hY3RpdmVJbmRleCA9IGNsaWNrZWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN3aXBlci51cGRhdGVDbGFzc2VzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQoIHN3aXBlci5zbGlkZXMgKS5yZW1vdmVDbGFzcyggJ2lzLXNlbGVjdGVkJyApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkKCBzd2lwZXIuY2xpY2tlZFNsaWRlICkuYWRkQ2xhc3MoICdpcy1zZWxlY3RlZCcgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZ2FsbGVyeVRvcC5zbGlkZVRvKCBjbGlja2VkLCAwLCBmYWxzZSApO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIG9uSW5pdDogZnVuY3Rpb24gKCAgKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRvdGFsQ291bnQgPSBfZ2FsbGVyeVRodW1icy5maW5kKCAnLnN3aXBlci1zbGlkZScpLmxlbmd0aCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnROdW07XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiggdG90YWxDb3VudCA8IDEwICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdG90YWxDb3VudCA9ICcwJyArIHRvdGFsQ291bnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9nYWxsZXJ5VGh1bWJzLmZpbmQoICcuZ2FsbGVyeV9fdGh1bWJzLXRvdGFsLWNvdW50JyApLnRleHQoIHRvdGFsQ291bnQgKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9nYWxsZXJ5VGh1bWJzLmZpbmQoICcuc3dpcGVyLXNsaWRlJykuZWFjaCggZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudE51bSA9ICQoIHRoaXMgKS5pbmRleCgpICsgMTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiggY3VycmVudE51bSA8IDEwICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnROdW0gPSAnMCcgKyBjdXJyZW50TnVtO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlICBpZiAoIGN1cnJlbnROdW1bMF0gPT0gMCApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50TnVtID0gY3VycmVudE51bS5zbGljZSgxKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCB0aGlzICkuZmluZCggJy5nYWxsZXJ5X190aHVtYnMtY3VycmVudC1udW0nICkudGV4dCggY3VycmVudE51bSApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9ICk7XHJcblxyXG5cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIF9pbml0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgX2luaXRTd2lwZXIoKTtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgX2luaXQoKTtcclxuICAgIH07XHJcblxyXG4gICAgdmFyIFJlYWRNb3JlID0gZnVuY3Rpb24gKG9iaikge1xyXG5cclxuICAgICAgICAvL3ByaXZhdGUgcHJvcGVydGllc1xyXG4gICAgICAgIHZhciBfc2VsZiA9IHRoaXMsXHJcbiAgICAgICAgICAgIF9vYmogPSBvYmosXHJcbiAgICAgICAgICAgIF93aW5kb3cgPSAkKCB3aW5kb3cpLFxyXG4gICAgICAgICAgICBfYm9keSA9ICQoICdib2R5JyksXHJcbiAgICAgICAgICAgIF9pdGVtcztcclxuXHJcbiAgICAgICAgLy9wcml2YXRlIG1ldGhvZHNcclxuICAgICAgICB2YXJcclxuICAgICAgICAgICAgX29uRXZlbnRzID0gZnVuY3Rpb24gKCkge1xyXG5cclxuICAgICAgICAgICAgICAgIF9vYmoub24oIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgY2xpY2s6IGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9kaXNwbGF5SXRlbXMoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIH0gKTtcclxuXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIF9pbml0ID0gZnVuY3Rpb24gKCkge1xyXG5cclxuICAgICAgICAgICAgICAgIF9vbkV2ZW50cygpO1xyXG4gICAgICAgICAgICAgICAgX2Rpc2FwcGVhckl0ZW1zKCk7XHJcbiAgICAgICAgICAgICAgICBfb2JqWzBdLm9iaiA9IF9zZWxmO1xyXG5cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgX2Rpc2FwcGVhckl0ZW1zID0gZnVuY3Rpb24gKCkge1xyXG5cclxuICAgICAgICAgICAgICAgIF9pdGVtcyA9IF9vYmoucGFyZW50KCkubmV4dEFsbCgpO1xyXG5cclxuICAgICAgICAgICAgICAgIF9pdGVtcy5jc3MoIHtcclxuICAgICAgICAgICAgICAgICAgICBkaXNwbGF5OiAnbm9uZSdcclxuICAgICAgICAgICAgICAgIH0gKTtcclxuXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIF9kaXNwbGF5SXRlbXMgPSBmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgX2l0ZW1zLmNzcygge1xyXG4gICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6ICdibG9jaydcclxuICAgICAgICAgICAgICAgIH0gKTtcclxuXHJcbiAgICAgICAgICAgICAgICBfb2JqLmNzcygge1xyXG4gICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6ICdub25lJ1xyXG4gICAgICAgICAgICAgICAgfSApO1xyXG5cclxuICAgICAgICAgICAgfTtcclxuXHJcblxyXG4gICAgICAgIF9pbml0KCk7XHJcbiAgICB9O1xyXG5cclxufSApKCk7XHJcblxyXG4iLCIoIGZ1bmN0aW9uKCl7XHJcblxyXG4gICAgJCggZnVuY3Rpb24oKXtcclxuICAgICAgICAkKCAnc2VsZWN0JyApLmVhY2goIGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgIG5ldyBXZWJzdGVyc1NlbGVjdCgge1xyXG4gICAgICAgICAgICAgICAgb2JqOiAkKCB0aGlzICksXHJcbiAgICAgICAgICAgICAgICBvcHRpb25UeXBlOiAxLFxyXG4gICAgICAgICAgICAgICAgc2hvd1R5cGU6IDJcclxuICAgICAgICAgICAgfSApO1xyXG4gICAgICAgIH0gKTtcclxuICAgIH0gKTtcclxuXHJcbiAgICB2YXIgV2Vic3RlcnNTZWxlY3QgPSBmdW5jdGlvbiggcGFyYW1zICl7XHJcblxyXG4gICAgICAgIC8vcHJpdmF0ZSBwcm9wZXJ0aWVzXHJcbiAgICAgICAgdmFyIF9zZWxmID0gdGhpcyxcclxuICAgICAgICAgICAgX29iaiA9IHBhcmFtcy5vYmosXHJcbiAgICAgICAgICAgIF9vcHRpb25UeXBlID0gcGFyYW1zLm9wdGlvblR5cGUgfHwgMCxcclxuICAgICAgICAgICAgX3Nob3dUeXBlID0gcGFyYW1zLnNob3dUeXBlIHx8IDAsXHJcbiAgICAgICAgICAgIF92aXNpYmxlID0gcGFyYW1zLnZpc2libGUgfHwgNSxcclxuICAgICAgICAgICAgX2RldmljZSA9IC9BbmRyb2lkfHdlYk9TfGlQaG9uZXxpUGFkfGlQb2R8QmxhY2tCZXJyeXxJRU1vYmlsZXxPcGVyYSBNaW5pL2kudGVzdCggbmF2aWdhdG9yLnVzZXJBZ2VudCApLFxyXG4gICAgICAgICAgICBfdGV4dCA9ICQoICc8c3BhbiBjbGFzcz1cIndlYnN0ZXJzLXNlbGVjdF9faXRlbVwiPjwvc3Bhbj4nICksXHJcbiAgICAgICAgICAgIF93cmFwID0gJCggJzxkaXYgY2xhc3M9XCJ3ZWJzdGVycy1zZWxlY3RcIj48L2Rpdj4nICksXHJcbiAgICAgICAgICAgIF93aW5kb3cgPSAkKCB3aW5kb3cgKSxcclxuICAgICAgICAgICAgX2JvZHkgPSAkKCAnYm9keScgKSxcclxuICAgICAgICAgICAgX29wZW5lZCA9IGZhbHNlLFxyXG4gICAgICAgICAgICBfcG9wdXAsIF9zY3JvbGw7XHJcblxyXG4gICAgICAgIC8vcHJpdmF0ZSBtZXRob2RzXHJcbiAgICAgICAgdmFyIF9hZGRXcmFwID0gZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgIHZhciBjdXJUZXh0ID0gJyc7XHJcblxyXG4gICAgICAgICAgICAgICAgX29iai5jc3MoIHtcclxuICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAwXHJcbiAgICAgICAgICAgICAgICB9ICk7XHJcblxyXG4gICAgICAgICAgICAgICAgX29iai53cmFwKCBfd3JhcCApO1xyXG4gICAgICAgICAgICAgICAgX3dyYXAgPSBfb2JqLnBhcmVudCgpO1xyXG4gICAgICAgICAgICAgICAgX3dyYXAuYXBwZW5kKCAnPGRpdiBjbGFzcz1cIndlYnN0ZXJzLXNlbGVjdF9fYXJyb3dcIj48L2Rpdj4nICk7XHJcbiAgICAgICAgICAgICAgICBfb2JqLmJlZm9yZSggX3RleHQgKTtcclxuICAgICAgICAgICAgICAgIF9vYmouZmluZCggJ29wdGlvbicgKS5lYWNoKCBmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBjdXJJdGVtID0gJCggdGhpcyApO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiggY3VySXRlbS5hdHRyKCAnc2VsZWN0ZWQnICkgPT0gJ3NlbGVjdGVkJyApe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJUZXh0ID0gY3VySXRlbS50ZXh0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSApO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmKCBjdXJUZXh0ID09ICcnICl7XHJcbiAgICAgICAgICAgICAgICAgICAgY3VyVGV4dCA9ICBfb2JqLmZpbmQoICdvcHRpb24nKS5lcSggMCApLnRleHQoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIF90ZXh0LnRleHQoIGN1clRleHQgKTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgX2hpZGVQb3B1cCA9IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICBfb3BlbmVkID0gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYoICFfc2hvd1R5cGUgKXtcclxuICAgICAgICAgICAgICAgICAgICBfcG9wdXAuY3NzKCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6ICdub25lJ1xyXG4gICAgICAgICAgICAgICAgICAgIH0gKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiggX3Nob3dUeXBlID09IDEgKXtcclxuICAgICAgICAgICAgICAgICAgICBfcG9wdXAuc3RvcCggdHJ1ZSwgZmFsc2UgKS5zbGlkZVVwKCAzMDAsIGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9wb3B1cC5yZW1vdmUoKTtcclxuICAgICAgICAgICAgICAgICAgICB9ICk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYoIF9zaG93VHlwZSA9PSAyICkge1xyXG4gICAgICAgICAgICAgICAgICAgIF9wb3B1cC5zdG9wKCB0cnVlLCBmYWxzZSApLmZhZGVPdXQoIDMwMCwgZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX3BvcHVwLnJlbW92ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBfd3JhcC5yZW1vdmVDbGFzcyggJ3dlYnN0ZXJzLXNlbGVjdF9vcGVuZWQnICk7XHJcblxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBfY29uc3RydWN0b3IgPSBmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgICAgX29ialsgMCBdLm9iaiA9IF9zZWxmO1xyXG5cclxuICAgICAgICAgICAgICAgIF9hZGRXcmFwKCk7XHJcbiAgICAgICAgICAgICAgICBfc2VsZWN0Vmlld1R5cGUoKTtcclxuICAgICAgICAgICAgICAgIF9vbkV2ZW50cygpO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBfb25FdmVudHMgPSBmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgICAgX29iai5vbiggJ2NoYW5nZScsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIF90ZXh0LnRleHQoICQoIHRoaXMgKS5maW5kKCAnb3B0aW9uOnNlbGVjdGVkJyApLnRleHQoKSApO1xyXG4gICAgICAgICAgICAgICAgfSApO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmKCBfb3B0aW9uVHlwZSA9PSAxICYmICFfZGV2aWNlICl7XHJcbiAgICAgICAgICAgICAgICAgICAgX3dyYXAub24oIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJ2NsaWNrJzogZnVuY3Rpb24oIGUgKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoIF9vcGVuZWQgKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfaGlkZVBvcHVwKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9zaG93UG9wdXAoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9ICk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIF93aW5kb3cub24oIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJ2NsaWNrJzogZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCBfb3BlbmVkICl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2hpZGVQb3B1cCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBfc2VsZWN0Vmlld1R5cGUgPSBmdW5jdGlvbigpe1xyXG5cclxuICAgICAgICAgICAgICAgIGlmKCAhX29wdGlvblR5cGUgfHwgX2RldmljZSApe1xyXG4gICAgICAgICAgICAgICAgICAgIF9zZXRNb2JpbGVWaWV3KCk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYoIF9vcHRpb25UeXBlID09IDEgKXtcclxuICAgICAgICAgICAgICAgICAgICBfc2V0Q3VzdG9tMSgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBfc2V0Q3VzdG9tMSA9IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICBfd3JhcC5hZGRDbGFzcyggJ3dlYnN0ZXJzLXNlbGVjdF9jdXN0b20nICk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIF9zZXRNb2JpbGVWaWV3ID0gZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgIF93cmFwLmFkZENsYXNzKCAnd2Vic3RlcnMtc2VsZWN0X21vYmlsZScgKTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgX3Nob3dQb3B1cCA9IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICB2YXIgc2VsZWN0cyA9ICQoICdzZWxlY3QnICksXHJcbiAgICAgICAgICAgICAgICAgICAgbGlzdCA9ICQoICc8dWw+PC91bD4nKSxcclxuICAgICAgICAgICAgICAgICAgICBjdXJTY3JvbGwgPSBfd2luZG93LnNjcm9sbFRvcCgpLFxyXG4gICAgICAgICAgICAgICAgICAgIG9mZnNldCA9IF93cmFwLm9mZnNldCgpLFxyXG4gICAgICAgICAgICAgICAgICAgIG1heEhlaWdodCA9IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgY3VySW5kZXggPSBfb2JqLmZpbmQoICdvcHRpb246c2VsZWN0ZWQnICkuaW5kZXgoKSxcclxuICAgICAgICAgICAgICAgICAgICBpZCA9IE1hdGgucm91bmQoIE1hdGgucmFuZG9tKCkgKiAxMDAwICk7XHJcblxyXG4gICAgICAgICAgICAgICAgc2VsZWN0cy5lYWNoKCBmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKCB0aGlzICE9PSBfb2JqWyAwIF0gJiYgdGhpcy5vYmouY2hlY2tPcGVuZWQoKSApe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm9iai5jbG9zZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiggX29wZW5lZCApe1xyXG4gICAgICAgICAgICAgICAgICAgIF9wb3B1cC5yZW1vdmUoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIF9vcGVuZWQgPSB0cnVlO1xyXG5cclxuICAgICAgICAgICAgICAgIF9wb3B1cCA9ICQoICc8ZGl2IGNsYXNzPVwid2Vic3RlcnMtc2VsZWN0X19wb3B1cFwiIGlkPVwid2Vic3RlcnMtc2VsZWN0X19wb3B1cCcgKyBpZCArICdcIj48L2Rpdj4nICk7XHJcblxyXG4gICAgICAgICAgICAgICAgX29iai5maW5kKCAnb3B0aW9uJyApLmVhY2goIGZ1bmN0aW9uKCBpICl7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGN1ckl0ZW0gPSAkKCB0aGlzICk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmKCBpID09IGN1ckluZGV4ICl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxpc3QuYXBwZW5kKCAnPGxpIGNsYXNzPVwiYWN0aXZlXCI+JyArIGN1ckl0ZW0udGV4dCgpICsgJzwvbGk+JyApO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxpc3QuYXBwZW5kKCAnPGxpPicgKyBjdXJJdGVtLnRleHQoKSArICc8L2xpPicgKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgfSApO1xyXG5cclxuICAgICAgICAgICAgICAgIF9wb3B1cC5hcHBlbmQoIGxpc3QgKTtcclxuICAgICAgICAgICAgICAgIF9ib2R5LmFwcGVuZCggX3BvcHVwICk7XHJcbiAgICAgICAgICAgICAgICBfd3JhcC5hZGRDbGFzcyggJ3dlYnN0ZXJzLXNlbGVjdF9vcGVuZWQnICk7XHJcblxyXG4gICAgICAgICAgICAgICAgX3BvcHVwLmNzcygge1xyXG4gICAgICAgICAgICAgICAgICAgIHdpZHRoOiBfd3JhcC5vdXRlcldpZHRoKCksXHJcbiAgICAgICAgICAgICAgICAgICAgbGVmdDogb2Zmc2V0LmxlZnQsXHJcbiAgICAgICAgICAgICAgICAgICAgdG9wOiBvZmZzZXQudG9wICsgX3dyYXAub3V0ZXJIZWlnaHQoKVxyXG4gICAgICAgICAgICAgICAgfSApO1xyXG5cclxuICAgICAgICAgICAgICAgIG1heEhlaWdodCA9IF9wb3B1cC5vdXRlckhlaWdodCgpO1xyXG4gICAgICAgICAgICAgICAgaWYoIG1heEhlaWdodCA+IF9wb3B1cC5maW5kKCAnbGknICkuZXEoIDAgKS5vdXRlckhlaWdodCgpICogX3Zpc2libGUgKXtcclxuICAgICAgICAgICAgICAgICAgICBfcG9wdXAuaGVpZ2h0KCBfcG9wdXAuZmluZCggJ2xpJyApLmVxKCAwICkub3V0ZXJIZWlnaHQoKSAqIF92aXNpYmxlICk7XHJcbiAgICAgICAgICAgICAgICAgICAgX3Njcm9sbCA9IF9wb3B1cC5uaWNlU2Nyb2xsKCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGhvcml6cmFpbGVuYWJsZWQ6IGZhbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgfSApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGlmKCBfc2hvd1R5cGUgPT0gMSApe1xyXG4gICAgICAgICAgICAgICAgICAgIF9wb3B1cC5jc3MoIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGlzcGxheTogJ25vbmUnXHJcbiAgICAgICAgICAgICAgICAgICAgfSApO1xyXG4gICAgICAgICAgICAgICAgICAgIF9wb3B1cC5zbGlkZURvd24oIDMwMCApO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmKCBfc2hvd1R5cGUgPT0gMiApIHtcclxuICAgICAgICAgICAgICAgICAgICBfcG9wdXAuY3NzKCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDAuMVxyXG4gICAgICAgICAgICAgICAgICAgIH0gKTtcclxuICAgICAgICAgICAgICAgICAgICBfcG9wdXAuYW5pbWF0ZSggeyBvcGFjaXR5OiAxIH0sIDMwMCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgX3BvcHVwLmZpbmQoICdsaScgKS5vbigge1xyXG4gICAgICAgICAgICAgICAgICAgICdjbGljayc6IGZ1bmN0aW9uKCBlICl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpbmRleCA9ICQoIHRoaXMgKS5pbmRleCgpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9vYmoudmFsKCBfb2JqLmZpbmQoICdvcHRpb24nICkuZXEoIGluZGV4ICkuYXR0ciggJ3ZhbHVlJyApICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9vYmoudHJpZ2dlciggJ2NoYW5nZScgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2hpZGVQb3B1cCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gKTtcclxuXHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgIC8vcHVibGljIHByb3BlcnRpZXNcclxuXHJcbiAgICAgICAgLy9wdWJsaWMgbWV0aG9kc1xyXG4gICAgICAgIF9zZWxmLmNoZWNrT3BlbmVkID0gZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgcmV0dXJuIF9vcGVuZWQ7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBfc2VsZi5jbG9zZSA9IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICBfaGlkZVBvcHVwKCk7XHJcbiAgICAgICAgfTtcclxuXHJcblxyXG4gICAgICAgIF9jb25zdHJ1Y3RvcigpO1xyXG5cclxuICAgIH07XHJcblxyXG59ICkoKTsiXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
